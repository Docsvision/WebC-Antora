= Предоставить доступ в {wc}

Любой пользователь, который зарегистрирован в _Справочнике сотрудников_ системы {dv}, может работать в {wc}е.

* Чтобы предоставить пользователю доступ к {wc}у, добавьте его в _Справочник сотрудников_.
* Чтобы закрыть пользователю доступ к {wc}у, удалите его из _Справочника сотрудников_.

[#configure]
== Настройка способов входа

Чтобы предоставить пользователю возможность авторизоваться с помощью сторонних сервисов, администратор должен выполнить настройку в карточке сотрудника в справочнике сотрудников на вкладке _Безопасность_.

.Вкладка "Безопасность"
image::authentication-methods.png[Вкладка "Безопасность"]

На вкладке представлен список доступных методов авторизации. Вверху списка всегда отображается аутентификация {dv} -- при помощи имени учётной записи Windows и пароля. При необходимости данный способ авторизации может быть отключен.

Ниже следует список доступных для использования учётных записей сторонних сервисов. В списке отображается логин пользователя, если таковой был настроен ранее. Нажмите на кнопку *Изменить*, чтобы открыть окно ввода имени пользователя и пароля для входа в сторонний сервис. Данные для входа с использованием учётной записи Windows и пароля изменить нельзя.

Доступные сервисы аутентификации отображаются в порядке, xref:programmer:client/authorization.adoc[получаемом из API]. В скобках после названия сервиса указывается логин пользователя.
Слева от каждого сервиса в списке находятся флаги. При помощи флагов регулируется доступность сервисов для пользователя: если флаг снят -- сервис не доступен.

Флаг выставляется автоматически после нажатия на кнопку *Изменить*, когда заполнены данные для входа. Снять и поставить флаг можно только, когда указан логин.

[#edit-service]
=== Изменение данных для входа в сервис

При нажатии на кнопку *Изменить* открывается окно для указания имени пользователя и пароля для конкретного сервиса.

Некоторые сервисы позволяют отправить запрос на проверку пользователя. В таких случаях доступна кнопка *Проверка*.

* Если пользователь найден и проверка прошла успешно, справа появляется подтверждение.
+
* Если имя уже используется, сообщение об этом появится при нажатии кнопки *Ок*.  Если имя ещё не использовалось, окно закрывается.

[#customize]
=== Внешний вид страницы входа

Администратор может изменить вид страницы аутентификации при помощи скриптов. Например, можно добавить email-адрес администратора:

.Страница входа с указанным адресом электронной почты администратора
image::authentication-email.png[Страница входа с указанным адресом электронной почты администратора]

Чтобы изменить вид страницы входа, разработайте собственные скрипты и поместите их в папку `{wcd}\Site\Content\Account\Scripts`.

//image::iis-webp.png[]
//
//Для IIS нужно будет добавить формат webp для файлов для сайта

//[#authorization]
//== GBL-2537 -- Принцип работы авторизации в {wc}
//
//При первом входе в систему сотрудник авторизуется с использованием базового сервиса. Страница входа в {wc} перенаправляет его на форму ввода данных для авторизации данного сервиса.
//
//После входа сервер {dv} осуществляет сопоставление записи в справочнике сотрудников с соответствующим пользователем.
//
//Если пользователь уже заходил xref:multi-tenant-mode.adoc#multitenant-auth[в данную БД] (тенант), параметры аутентификации сохраняются в файлы cookie, после чего данный сервис предлагается сотруднику по умолчанию.
//
//На странице входа формируется список доступных сервисов авторизации. Сервис, с помощью которого сотрудник авторизовался в предыдущий раз, будет отображаться первым в списке. Сервис {dv} всегда доступен в общем списке доступных пользователю сервисов и тенантов.
//
//В списке отображаются только доступные для данного пользователя сервисы и тенанты. Доступность сервисов настраивает администратор в карточке сотрудника в справочнике сотрудников.
//
//Если пользователю доступен только один сервис аутентификации, он всегда будет входить с его помощью. Если единственный сервис -- это сервис {dv}, на странице входа будет отображаться стандартный диалог аутентификации {dv}. В противном случае сотрудник будет перенаправлен на страницу авторизации соответствующего сервиса.
