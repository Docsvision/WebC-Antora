:pool: "DocsvisionSitePool"
:def: Default Web Site
:dispatch: Диспетчер служб IIS

= Изменить порт подключения {wc}а

По умолчанию {wc} работает по протоколу HTTP, использующему порт 80. Администратор может установить новый порт для доступа к {wc}.

.Мастер настройки. Страница выбора типа настройки
image::configmaster_startpage.png[Мастер настройки. Страница выбора типа настройки]

== Назначить следующий свободный порт

[#simpleSetting]
.Чтобы быстро настроить следующий свободный порт для подключения {wc}а:
. Откройте xref:controlPanel.adoc[{pu}].
. На главной странице выберите *Настроить*.
. Выберите *Простая* настройка.
. {wc} создаст новый сайт в IIS.
+
****
Новый сайт займёт следующий по счёту свободный порт.
****

== Изменить порт вручную

[#easy]
Порт можно назначить вручную для текущего сайта.

.Чтобы изменить порт текущего сайта {wc} вручную:
. Откройте {dispatch}.
. В колонке _Подключения_, раскройте текущий сервер и раскройте директорию _сайты_.
. В раскрытой директории найдите сайт {wc}а.
. Откройте {dispatch} и найдите сайт {wc}а.
. Выберите сайт и найдите пункт _Привязки_ в колонке _Действия_ справа.
. В появившемся окне измените привязки сайта, нажав кнопку *Изменить*.
. Укажите желаемый порт в поле `Порт`, затем нажмите *ОК*.
. Закройте {dispatch}, запустите {pu}.
. В панели управления выберите раздел настроек xref:controlPanelWebclient.adoc[WebClient].
. Выберите *_Сайт в IIS_* из раскрывающегося списка.
. Нажмите обновить.
+
****
{wc} будет доступен по новому адресу.
****
+
//[#default]
//== Изменить на отдельном сайте
//Если вы хотите также изменить порт подключения модуля Windows-клиент, выполните следующие действия:
//
//. Настройте порт подключения для {def} согласно <<easy,инструкции>>.
//. Откройте редактор реестра, перейдите в ветку `HKEY_LOCAL_MACHINE\SOFTWARE\DocsVision\Platform\5.5\Site`, убедитесь, что в параметре _ConnectAddress_ указан новый порт.
//. Перейдите в ветку реестра `HKEY_LOCAL_MACHINE\SOFTWARE\DocsVision\Workflow\5.5` и убедитесь, что в параметрах, где указан адрес задан новый порт.
//. Сохраните изменения в реестре и откройте файл `C:\Program Files (x86)\Docsvision\WebClient\5.5\WebClientAdminConsole.exe.Config` в текстовом редакторе. Выполните поиск по имени сервера. Найдите следующие строки:
//+
//[source,]
//----
// <Server>
//        <SessionManagerConnection ConnectionAddress="http://<servername>/DocsVision" <.>
//          BaseName="" Transport="Default" />
//      </Server>
//----
//+
//[source,]
//----
//      <federatedAuthentication>
//        <wsFederation issuer="http://<servername>/DocsvisionWebClient" realm="http://<servername>/DocsvisionWebClient" passiveRedirectEnabled="false" requireHttps="false" /> <.>
//        <cookieHandler requireSsl="false" />
//      </federatedAuthentication>
//----
//<.> Адрес подключения к серверу Windows-клиента.
//<.> Адрес подключения к серверу {wc}а.
//+
//В отмеченных строках укажите новый порт.
//+
//. Откройте _Консоль настройки DocsVision_ и настройте адрес подключения. Настройка выполняется согласно документу Руководство Администратора модуля Платформа, раздел _Настройки сервера_ -> _Управление доступом_.
//. Перезапустите IIS.
+
[NOTE]
====
После изменения порта подключения потребуется распространить новые настройки на все клиентские машины.

Не забудьте открыть порт в Windows Firewall на сервере приложений и создать правила, открывающие новые TCP порты для входящих и исходящих подключений.
====
