
== Настройка безопасности объектов

Система {dv} поддерживает несколько моделей безопасности, позволяющих настраивать права доступа к объектам: ролевую, мандатную и дискреционную. Настройка безопасности с использованием первых двух моделей осуществляется специалистом при настройке системы. Возможность настройки дискреционной безопасности доступна пользователям при наличии права владения объектом.

{wc} предоставляет возможность настройки дискреционных прав доступа с использованием диалога настройки.

image::discretSecurity.png[Диалог назначения дискреционных прав доступа]

Данный диалог позволяет изменять существующие права доступа, предоставлять доступ субъектам из Справочника сотрудников, включать и выключать наследование прав доступа от родительского объекта. Обратите внимание: субъекты могут быть выбраны только из Справочника сотрудников, при этом также отображаются и могут быть изменены права, назначенные для субъектов из Active Directory. Права могут быть предоставлены отдельным сотрудникам, группам сотрудников и/или организациями/подразделениям.

Права доступа, отображаемые в диалоге, разделены на две группы:

* непосредственные -- права доступа, назначенные для данного объекта;
* унаследованные -- права доступа, назначенные для родительского объекта и унаследованные текущим (если включено наследование прав).

Возможность изменения унаследованных прав доступа недоступна -- соответствующие элементы управления заблокированы. Данные права доступа нужно изменять непосредственно в родительском объекте, от которого они наследуются. Также возможность изменения прав доступа будет недоступна, если у пользователя отсутствуют права на изменение прав доступа.

Права доступа включают следующие категории:

* Полный доступ -- предоставляются права на чтение, изменение, удаление и владение объектом;
* Чтение -- предоставляет доступ на просмотр содержимого объекта;
* Изменение -- предоставляет доступ на изменение содержимого объекта;
* Удаление -- предоставляет доступ на удаление объекта;
* Владение -- предоставляет доступ на изменение прав доступа к объекту;
* Особые -- используются расширенные настройки доступа (могут быть установлены и изменены в Windows-клиенте).

Право на выполнение операции в определенной категории может иметь одно из трёх значений:

* image:buttons/discretNotSet.png[Пустой квадарт] -- разрешение отсутствует: субъекту будет запрещено выполнение операции, если разрешение не получено от других субъектов (например, пользователь может входить в группу, которой предоставлено разрешение);
* image:buttons/discretAllow.png[Квадрат с галочкой] -- разрешено: субъекту будет разрешено выполнение операции, если нет явного запрета от других субъектов;
* image:buttons/discretDeny.png[Квадарт с крестиком] -- запрещено: субъекту будет запрещено выполнение операции, в т. ч. если предоставлено разрешение от других субъектов.

Далее рассмотрены общие правила работы с диалогом назначения дискреционных прав доступа. Инструкция по настройке прав для определённого типа объекта приведена в следующих пунктах:

* xref:FolderSecurityConfig.adoc[Назначение прав доступа к папке].

Для назначения прав доступа к объекту:

. Откройте диалог назначения дискреционных прав доступа к объекту, для которого настраиваются права.
+
При отсутствии права владения объектом диалог назначения прав доступа открывается в режиме чтения, без возможности изменения настроек безопасности.
. Если требуется, измените наследование прав:
* Для отключения применение к объекту прав доступа, назначенных родительском объекту:
[loweralpha]
.. Нажмите кнопку *Выключить наследование*. При этом будет предложено выбрать способ отключения наследования:
+
image::discretSecurityDisableLegacyDialog.png[Диалог отключения наследования]
.. Нажмите кнопку:
** *Удалить унаследованные права* -- права доступа, установленные для родительского объекта, будут удалены из текущего объекта, наследование изменений прав родительского объекта будет отключено;
** *Преобразовать в явные разрешения* -- права доступа, установленные для родительского объекта, будут применены к текущему объекту, наследование изменений прав родительского объекта будет отключено;
** *Отмена* -- отменить операцию отключение наследования.
+
[NOTE]
====
[.note__title]#Note:#

Обратите внимание, что настройки наследования применяются сразу после нажатия кнопки.
====
+
В зависимости от выбранного варианта отключения наследования, в текущем объекте будут сохранены или нет права, полученные от родительского объекта.
+
Чтобы восстановить наследование, нажмите кнопку *Включить наследование*. Настройки применятся сразу после нажатия кнопки.
. Если требуется, добавьте нового субъекта:
[loweralpha]
.. Щелкните по кнопке image:buttons/bt_selector_book.png[Книга] в первой строке списка прав доступа. Будет открыто окно выбора записи из Справочника сотрудников.
.. Выберите из справочника сотрудника, группу или подразделение. В список прав будет добавлена новая запись. По умолчанию права не предоставляются.
+
Работа со справочником рассмотрена в пункте xref:StaffDirectoryItems.adoc[Записи справочника сотрудников].
. Измените права доступа субъекта:
* Для разрешения выполнения операции субъекту, щелкните несколько раз по флагу в соответствующей категории до перехода в состояние: image:buttons/discretAllow.png[Квадарт с галочкой].
* Для запрета выполнения операции субъекту, щелкните несколько раз по флагу в соответствующей категории до перехода в состояние: image:buttons/discretDeny.png[Квадрат с крестиком].
* Для отмены запрета и разрешения операции субъекту, щелкните несколько раз по флагу в соответствующей категории до перехода в состояние: image:buttons/discretNotSet.png[Пустой квадарт].
+
Разрешение, установленное в категории "Полный доступ", будет применено ко всем другим категориям.
. Для удаления прав доступа щелкните по кнопке image:buttons/removeItemFromList.png[Крестик] в строке субъекта. Разрешение удаляется без подтверждения.
+
Обратите внимание: если у объекта были удалены все права доступа, то добавить права сможет только администратор безопасности (член группы {dv} Security Administrator).
. Нажмите кнопку *ОК* в окне диалога назначения дискреционных прав доступа для применения изменений. Для отмены не применённых изменений нажмите кнопку *Отмена*.
