= Использование поиска по карточкам

Для ввода поискового запроса используется <<folderSearch,Поле поиска>>.

Пользователям {wc}а доступны различные варианты поиска карточек.

[#folderSearch]
== Поиск по папке

Поиск по текущей папке используется, если отключен <<fullTextSearch,полнотекстовый>> поиск. В этом случае выполняется поиск карточек открытой папки, в которых встречается указанная строка.

.Поиск по папке
image::searchAreaCurrentFolder.png[Поиск по папке]

Чтобы осуществить поиск по открытой папке, введите в строке поиска один или несколько символов искомого слова. Поиск карточек будет выполнен после непродолжительной паузы. При повторном открытии данной папки будет применен ранее использованный поисковый запрос.

// tag::resetSearch[]
Чтобы сбросить поисковый запрос: нажмите крестик в строке поиска. В качестве альтернативы, вы можете стереть все символы, введённые в строку поиска, и нажать kbd:[Enter].

TIP: Текущий поисковый запрос будет также сброшен вместе с пользовательскими xref:foldersGeneralOperations.adoc#foldersResetUserSettings[настройками папки].
// end::resetSearch[]

[#fullTextSearch]
== Полнотекстовый поиск

include::partial$excerpts.adoc[tags=fullTextResults]

Пользователь {wc}а может осуществлять поиск карточек по содержимому с помощью полнотекстового поиска. Полнотекстовый поиск становится доступным при выполнении следующих условий:

* Полнотекстовый поиск настроен в {dv}.
* Данные карточек проиндексированы.

Полнотекстовый поиск карточек может выполняться среди карточек текущей открытой папки или среди всех карточек. Область поиска выбирается в xref:interfaceSearch.adoc[строке поиска] при соблюдении следующих правил:

* На xref:interfaceDashboard.adoc[_главной странице_] доступен только режим поиска среди всех карточек.
* На странице папки доступны варианты поиска:
- По всем карточкам,
- Карточкам текущей папки,
- Карточкам папки и её подпапок.

.Чтобы осуществить полнотекстовый поиск:
. Введите в строке поиска часть слова или фразу искомого текста.
. Выберите область поиска:
В текущей папке::
Область поиска доступна для выбора только на страницах _стандартных_ или _виртуальных_ папок.
+
При выполнении поиска в дочерней папке, поиск в родительской папке выполнен не будет.
+
В поле поиска для данного варианта отображается подсказка: `Искать в текущей папке`.
+
Включая подпапки::
Область поиска доступна для выбора только на страницах _стандартных_ или _виртуальных_ папок, у которых имеются дочерние папки.
+
В поле поиска для данного варианта отображается подсказка: `Искать в текущей папке, включая стандартные подпапки`.
+
В найденном::
Область поиска доступна для выбора в папке _Поиск_ при наличии ранее найденных карточек в данной папке.
+
В поле поиска для данного варианта отображается подсказка: `Искать среди найденных карточек`.
+
Везде::
Область поиска доступна для выбора на всех страницах {wc}а.
+
При выборе данного варианта поиск карточек будет выполняться по всей базе данных.
+
В поле поиска для данного варианта отображается подсказка: `Искать среди всех карточек`.
+
.Полнотекстовый поиск
image::viewareaSearchResultAllBase.png[Полнотекстовый поиск]
. Нажмите клавишу kbd:[Enter], чтобы отправить поисковой запрос на сервер.

.Особенности полнотекстового поиска
****
В результатах поиска отображаются только карточки, к которым у текущего пользователя есть доступ.

Если в настройках полнотекстового поиска не установлены ограничения на типы карточек, будет выполнен поиск по всем типам карточкам, иначе только по разрешенным типам.

При отсутствии карточек, удовлетворяющих запросу, в представлении отображается текст: `Нет данных для отображения`.

Поисковый запрос, используемый для поиска по текущей папке или папке с подпапками, сохраняется и будет использован при повторном открытии данной папки.
****

include::search.adoc[tags=resetSearch]

Администратор {dv} может настроить полнотекстовый поиск с использованием одной из нескольких систем полнотекстового поиска. В зависимости от системы результаты поиска, а также требования к исходным данным могут отличаться. Например, при поиске с использованием системы Elasticsearch есть следующие особенности:

* Может потребоваться ввод большего числа знаков в словах поисковой фразы.
* Результаты поиска могут содержать записи, которые не полностью соответствуют поисковой фразе.
* В некоторых вариантах поисковой фразы Elasticsearch может не возвращать результаты.

Также от выбора системы полнотекстового поиска зависит возможность поиска по различным типам файлов:

* При использовании встроенной в Microsoft SQL Server системы поиска: `.pdf` и файлы Microsoft Office;
* При использовании системы полнотекстового поиска Elasticsearch: `.pdf`, файлы Microsoft Office (`.docx`, `.doc`, `.xlsx`, `.xls`, `.pptx`, `.ppt`, `.rtf`), `.html` и `.txt`.

TIP: Ознакомится с подробной инструкцией по настройке поисковой системы и особенностями работы каждой из них можно в _Руководстве администратора модуля Платформа_, пункт "Настройка полнотекстового поиска".

[#parametricSearch]
== Параметрический поиск

Параметрический поиск -- вариант поискового запроса, для выполнения которого пользователь должен предварительно настроить параметры запроса с помощью предоставляемой панели настройки.

.Панель настройки параметрического поиска
image::parametricSearch.png[Панель настройки параметрического поиска]

[horizontal]
.Панель настройки параметрического поиска содержит:
Список параметров запроса::
+
Значение параметра устанавливается с помощью элемента управления, соответствующего типу параметра.
+
При наведении курсора мыши на название параметра будет отображена подсказка с условием поиска по данному параметру.
+
Переключатели использования параметра в запросе::
* image:buttons/switchOn.png[Вкл.] -- параметр используется в запросе.
* image:buttons/switchOff.png[Выкл.] -- параметр не используется в запросе.
+
Ссылки::
* Очистить все. Очищает значения всех параметров и устанавливает все переключатели в значение *Не используется*.
* Включить все. Устанавливает все переключатели в значение *Используется*.
* Последний поиск. Устанавливает параметры и переключатели в значения, которые были использованы при последнем выполнении данного запроса на данном устройстве.
. Кнопка *Закрыть*. Закрывает панель настройки.
. Кнопка *ОК*. Выполняет запрос.

.Чтобы настроить и выполнить параметрический запрос:
. Введите или выберите значения параметров, которые должны быть добавлены в поисковый запрос.
+
При изменении значения параметра, переключатель использования будет автоматически включен.
+
Если значение параметра, включенного в запрос, не выбрано, он будет участвовать в запросе с признаком `*значение поля не указано`*.
. Установить переключатели использования параметров, которые не должны использоваться в запросе, в значениеimage:buttons/switchOff.png[Выкл.].
. Нажать на кнопку *ОК*.

== Поиск карточки по штрих-коду

.Чтобы открыть карточку, зная её штрих код:
. Откройте поле для ввода нажатием кнопки image:buttons/searchByBarcodeButton.png[Поиск по штрихкоду] на панели меню.
+
.Кнопка и поле для ввода штрих-кода
image::searchByBardcodeBox.png[Кнопка и поле для ввода штрих-кода]
+
. Введите в текстовое поле цифровое значение штрих-кода с помощью клавиатуры или сканера штрих-кодов.
+
****
Найденная карточка будет открыта в новой вкладке веб-браузера.

Если карточка с указанным штрих-кодом не зарегистрирована в {dv}, будет выдано сообщение: `Не удалось найти карточку с указанным штрихкодом`. Повторите поиск с корректным значением штрих-кода.
****

=== Потоковый поиск карточек по штрих-коду

Помимо одиночного режима поиска карточки по штрих-коду, {wc} поддерживает потоковый режим, при котором пользователь может открыть одновременно несколько карточек, предварительно указав их штрих-коды. Данный режим поиска должен быть xref:layouts:ctrl/webFrame/barcodeSearchButton.adoc#barCodeMode[настроен] отдельно.

.Чтобы выполнить поиск нескольких карточек:
. Откройте поле для ввода нажатием кнопки image:buttons/searchByBarcodeButton.png[Поиск по штрихкоду] на панели меню.
. Введите в текстовое поле цифровое значение штрих-кода с помощью клавиатуры или сканера штрих-кодов.
+
****
В правой части поля поиска появится кнопка открытия карточек, в которой будет указано количество штрих-кодов в очереди поиска.
****
+
.Поле ввода штрих-кода с кнопкой открытия карточек
image::searchByBardcodeMultiMode.png[Поле ввода штрих-кода с кнопкой открытия карточек]
+
. Последовательно введите штрих-коды других искомых карточек.
. Нажмите на кнопку *Открыть карточек: <Кол-во карточек>*.
+
****
В веб-браузере будут открыты вкладки с найденными карточками.
****
+
. Если карточка с указанным штрих-кодом не зарегистрирована в {dv}, она будет содержать текст: `Не удалось найти карточку с указанным штрихкодом`.
+
****
Повторите поиск с корректным значением штрих-кода.
****
+
[NOTE]
====
Технические возможности ограничивают максимальное число вкладок, которые могут быть одновременно открыты в веб-браузере. Если при выполнении потокового поиска возникла ошибка вида `К сожалению, произошла ошибка. Пожалуйста, обратитесь к администратору системы... Не удалось завершить действие` попробуйте выполнить поиск меньшего числа карточек.
====
+
.Кнопка *X* в поле ввода штрих-кода очищает:
* Текущее значение в строке, если оно введено.
* Очередь поиска, если строка поиска пуста.
