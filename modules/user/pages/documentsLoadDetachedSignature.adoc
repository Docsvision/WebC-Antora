= Загрузить отсоединённую электронную подпись файла

{wc} поддерживает возможность загрузки отсоединённой электронной подписи в карточку Документа для подписания основного файла.

https://ca.kontur.ru/articles/ecp-terminy[Отсоединённая ЭП] -- файл формата `.p7s`, `.sig`, `.sgn` или `.sign`, содержащий электронную подпись подписанного файла. Отсоединённая ЭП может быть загружена с использованием кодировки `DER` или `BASE-64`.

[NOTE]
====
{wc} поддерживает загрузку отсоединённых подписей только основных файлов.
====

.Чтобы загрузить отсоединённую подпись:
. Откройте карточку Документ, в которую загружается отсоединённая подпись.
. Перейдите к разделу _Файлы_.
. Загрузите электронную подпись:
+
--
.Если карточка Документ содержит файл, для которого загружается отсоединённая подпись:
.. В строке основного файла, для которого загружается подпись, нажмите image:buttons/verticalDots.png[Три вертикальные точки] *> Загрузить ЭП*.
.. Выберите файл отсоединённой подписи (`.p7s`, `.sig`, `.sgn`, `.sign`).
.. Нажмите *Открыть*, чтобы загрузить выбранные файлы.
--
+
.Если файл с отсоединённой подписью загружается вместе с подписью:
.. Нажмите image:buttons/attachFile.png[Папка] *> +Основной*.
.. Выберите подписанный файл и файл, содержащий отсоединённую подпись (.p7s`, `.sig`, `.sgn`, `.sign`).
.. Нажмите *Открыть*, чтобы загрузить выбранные файлы.


В атрибуте _Имя файла_ отсоединённой электронной подписи должно содержаться название файла, которому принадлежит данная подпись, иначе загрузка будет невозможна.

Возможность загрузки электронной подписи будет недоступна, если запрещена xref:layouts:ctrl/special/fileList.adoc#editOperationToAddSignature[операция редактирования] для добавления подписи.

Если карточка Документ содержит файл с отсоединённой подписью или файл был загружен вместе с отсоединённой подписью, подпись будет прикреплена к этому файлу. Подпись прикрепляется к текущей версии основного файла. Проверить, к какому файлу прикреплена подпись можно с помощью xref:documentsSigntaureLog.adoc[журнала электронно-цифровых подписей].

Если файл, к которому должна быть присоединена подпись, отсутствует в Документе, будет выдано сообщение о невозможности загрузки подписи. Другие файлы, выбранные при загрузке, будут загружены при наличии прав.

Если присоединяемая подпись недействительна, будет выдано сообщение об ошибке. Подпись загружена не будет.

Если оставшийся срок действия сертификата подписи составляет менее 5 дней, будет выдано предупреждение: `Срок действия сертификата закончится <Дата>`. Пользователь может подтвердить или отменить загрузку подписи.

Если выбран файл с *присоединённой* электронной подписью (файл-контейнер, содержащий и подписанный файл и электронную подпись), будет выдано предупреждение: `Необходимо использовать отсоединенную подпись`.
