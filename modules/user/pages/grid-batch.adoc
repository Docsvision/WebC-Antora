= Групповые операции в новом гриде

Новый грид поддерживает работу с групповыми операциями.

.Доступные групповые операции нового грида:
- Прочитать.
- Копировать ярлыки карточек.
- Переместить ярлыки карточек.
- Удалить ярлыки карточек.
- Групповое делегирование.

Групповая операция -- операция, которая применяется сразу к нескольким карточкам.

Если групповые операции недоступны, выводится соответствующее сообщение. Сообщение может быть изменено в программе {kvr}, в свойстве xref:layouts:ctrl/folderComponents/folderGrid_FolderGridBatchOperationsNode.adoc#message[Текст, если нет групповых операций].

== Особенности групповых операций в {wc}е

.Особенности работы с групповыми операциями в {wc}е:
* Групповая операция является синхронной. Во время выполнения групповой операции другие операции недоступны.
* Групповые операции выполняются последовательно.
* Выполнение групповой операции можно прервать. При этом невыполненные операции не будут завершены.
* Групповая операция выполняется в веб-браузере. Страница {wc}а, в которой выполняется групповая операция, должна оставаться открытой до завершения, иначе выполнение будет прервано.
* При попытке выполнить групповую операцию происходит проверка. Проверяется возможность выполнить данную операцию.

== Работа с групповыми операциями

.Панель групповых операции в гриде
image::grid-batch.png[Панель групповых операции в гриде]

. Чтобы открыть новые групповые операции, выберите одну или несколько карточек в папке при помощи флага.
+
[NOTE]
====
В мобильной версии коснитесь и удерживайте палец на нужной карточке до появления строки групповых операций.

Коснитесь других карточек, чтобы добавить их в групповую операцию. Коснитесь повторно, чтобы снять выбор.

Количество выбранных карточек будет указано в строке групповых операций.
====
+
. В появившейся панели групповых операций выберите нужную операцию.
. Если для выбранных карточек недоступны групповые операции, будет отображаться сообщение, заданное в свойстве "xref:layouts:ctrl/folderComponents/folderGrid_FolderGridBatchOperationsNode.adoc#message[Текст, если нет групповых операций]" элемента управления `_Узел для групповых операций_`.

[#batch-read]
:caps: Прочитать
:act: прочитать
:en: read
include::partial$new-batch-ops.adoc[tags=simple]

[#batch-copy]
:caps: Копировать
:act: копировать
:pr: Копирование
:en: copy
include::partial$new-batch-ops.adoc[tags=hard]

[#batch-move]
:caps: Переместить
:act: переместить
:pr: Премещение
:en: move
include::partial$new-batch-ops.adoc[tags=hard]

[#batch-remove]
:caps: Удалить ярлык
:en: remove
:act: удалить ярлыки
include::partial$new-batch-ops.adoc[tags=simple]

[#batch-delete]
:caps: Удалить карточки
:en: delete
:act: удалить
include::partial$new-batch-ops.adoc[tags=simple]
+
include::partial$excerpts.adoc[tags=deletion]

[#batch-download]
=== Скачать файлы карточки

.Чтобы скачать файлы из нескольких карточек:
. Выберите нужные карточки, поставив флаги слева от заголовка строки.
. Нажмите кнопку *Скачать файлы* на панели групповых операций.
. Дождитесь завершения групповой операции.
+
.Выполнение групповой операции "Скачать файлы карточки"
image::batch-op-download-process.png[Выполнение групповой операции "Скачать файлы карточки"]

Если в процессе выполнения групповой операции возникли ошибки, информация будет выведена в окне выполнения.

Из карточки могут быть скачаны основные файлы, дополнительные или файлы с подписями в зависимости от заданных свойств xref:layouts:ctrl/batchOperations/downloadFilesBatchOperation.adoc[ЭУ групповой операции]. Файлы каждой карточки будут скачаны одним архивом.

[#delegate]
=== Групповое делегирование

.Чтобы делегировать несколько заданий:
. Выберите нужные карточки, поставив флаги слева от заголовка строки.
. Нажмите кнопку *Делегировать* на панели групповых операций.
+
.Делегирование задания
image::batch-op-delegate-panel.png[Делегирование задания]
+
. Выберите сотрудника, которому делегируются задания.
. Добавьте комментарий к делегированию.
. Чтобы запретить повторное делегирование заданий, установите флаг `*Запрет делегирования*`.
. Чтобы вернуть себе задания после их завершения делегатом, установите флаг `*Возврат с делегирования*`.
. Нажмите кнопку *Делегировать*, чтобы запустить процесс делегирования заданий.
+
****
Состояние выполнения групповой операции отображается в диалоговом окне.

.Диалоговое окно групповой операции "Делегирование"
image::batch-op-delegate-process.png[Диалоговое окно групповой операции "Делегирование"]

[NOTE]
====
Чтобы прервать выполнение операции, нажмите кнопку *Прервать операцию*.
====

Если групповая операция завершилась без ошибок, диалоговое окно будет автоматически закрыто.

Если в процессе выполнения групповой операции возникли ошибки, информация о них будет показана в диалоговом окне.

.Диалоговое окно групповой операции "Делегирование" со списком ошибок
image::batch-op-delegate-err.png[Диалоговое окно групповой операции "Делегирование" со списком ошибок]

Для каждой карточки с ошибкой отображается ссылка на карточку и причина ошибки.

После исправления ошибок групповое делегирование для требуемых карточек может быть выполнено повторно.
****
+
. Чтобы выйти из режима групповых операций, нажмите кнопку image:buttons/arrow-back.png[Стрелка влево] в строке над таблицей представления.

// [#duplicate]
// == Дублировать карточки
//
// .Чтобы создать дубликат нескольких карточек:
// . Выберите одну или несколько карточек.
// . Нажмите кнопку _Дублировать карточки_ на панели групповых операций.
// +
// . В зависимости от значения свойства "xref:layouts:ctrl/batchOperations/.duplicateCardsBatchOperation.adoc#window[Окно выбора папки]" в ЭУ `_Групповая операция / Дублировать карточки_` может отображаться окно выбора папки.
// +
// Если в свойстве указано значение `*Показывать*`, открывается окно выбора папки, в которую будут добавлены ярлыки дубликатов. В окне отображаются только физические папки и две кнопки:
// +
// * *Выбрать* -- кнопка доступна только, когда выбрана папка, при нажатии на кнопку карточки и ярлыки на них будут созданы в выбранной папке.
// * *Без папки* -- при нажатии на кнопку, будут созданы только карточки-дубликаты, ярлыки не создаются.
// +
// При закрытии окна выбора папки на кнопку image:buttons/x.png[Крестик] групповая операция дублирования отменяется.
// +
// [NOTE]
// ====
// Если свойство "xref:layouts:ctrl/batchOperations/.duplicateCardsBatchOperation.adoc#window[Окно выбора папки]" в ЭУ `_Групповая операция / Дублировать карточки_` установлено в значение `*Не показывать*`, карточки создаются в системе без папки.
// ====
