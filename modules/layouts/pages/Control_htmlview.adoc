
== Html виджет

Элемент управления [.ph .uicontrol]*Html виджет* предназначен для отображения HTML-страницы с заданным адресом.

image::ct_htmlview.png[[.fig--title-label]##Рис. 1. ##Элемент управления «Html виджет» с содержимым HTML-страницы в разметке исходящего документа]

[.ph .uicontrol]*Html виджет* может загружать (определяется значение настройки «Режим») HTML-страницу из указанного файла или ресурса (URL адрес может быть указан непосредственно в настройках ЭУ или получен из данных карточки).

=== Свойства

Общие::
  Название ЭУ;;
    Название типа элемента управления.
  Название;;
    Уникальное название элемента управления.
Внешний вид::
  Подсказка;;
    Содержимое всплывающей подсказки.
    +
    [#concept_str_zj3_dx__d7e65 .dfn .term]#Локализуемый#.
Данные::
  Расширенный источник данных;;
    Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
  Источник данных;;
    Секция карточки, содержащая данные элемента управления.
  Поле данных;;
    Текстовое поле карточки, содержащее код отображаемой HTML-страницы.
    +
    Настройки «Поле данных» и «Источник данных» доступны, когда в настройке Режим выбрано значение «Из карточки».
  URL;;
    Адрес HTML-страницы, который зависит от выбранного режима ЭУ (настройка `Режим`):
    +
    * если режим «Из файла» – относительный путь к файлу HTML-страницы в каталоге установки модуля {wc} (например: [.ph .filepath]`Content\Extensions\HtmlPages\manual.adoc`);
    +
    Файл HTML-страницы следует размещать только в подкаталоге [.ph .filepath]`Site/Content/Extensions` или [.ph .filepath]`Site/Content/Solutions` каталога установки {wc}а.
    * если режим «Внешний ресурс» – URL-адрес HTML-страницы (например: [.ph .filepath]`http://web.domain.com/htmlpages/manual.html`).
    +
    Внешний ресурс, с которого загружается HTML-страница, должен разрешать встраивание страниц в IFRAME (не отправлять заголовок «X-FRAME-OPTIONS» в ответе).
    +
    Настройка «URL» отображается, когда выбран режим «Из файла» или «Внешний ресурс».
Поведение::
  Sandbox фрейма;;
    Значение атрибута sandbox, добавляемого к тегу IFRAME. Должен быть установлен флаг «Использовать sandbox фрейма».
    +
    Настройка «Sandbox фрейма» отображается, когда выбран режим «Внешний ресурс».
  Видимость;;
    Настройка видимости: флаг установлен – элемент управления отображается в карточке; флаг не установлен – элемент управления (а также его содержимое) не отображается в карточке.
    +
    [.dfn .term]_Адаптивный_.
  Дополнительные css классы;;
    Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
  Обезопасить HTML;;
    Флаг, указывающий на необходимость очистки HTML-кода внедряемой страницы от потенциально небезопасных элементов, через которые возможна XSS-атака (в частности, скрипты).
  Операция редактирования для видимости;;
    Определяет операцию, которая должна быть доступна пользователю для показа данного элемента управления. Действие настройки зависит от значения настройки [.dfn .term]_Видимость_:
    +
    * флаг [.dfn .term]_Видимость_ установлен, [.dfn .term]_операция редактирования для видимости_ выбрана – видимость элемента определяется доступностью пользователю выбранной операции редактирования;
    * флаг [.dfn .term]_Видимость_ установлен, [.dfn .term]_операция редактирования для видимости_ НЕ выбрана – ЭУ всегда отображается;
    * флаг [.dfn .term]_Видимость_ НЕ установлен – ЭУ всегда скрыт.
  Использовать sandbox фрейма;;
    Флаг, указывающий на необходимость добавления к тегу IFRAME атрибута sandbox (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe) со значением из настройки «Sandbox фрейма».
    +
    Настройка «Использовать sandbox фрейма» отображается, когда выбран режим «Внешний ресурс».
  Прокрутка фрейма;;
    Режим показа полос прокрутки для содержимого, отображаемого во фрейме:
    +
    * «auto» – необходимость отображения полос прокрутки определяется автоматически;
    * «yes» – полосы прокрутки отображаются всегда;
    * «no» – полосы прокрутки всегда скрыты.
    +
    Настройка «Прокрутка фрейма» отображается, когда выбран режим «Внешний ресурс».
  Режим;;
    Определяет способ получения данных для отображения в виджете:
    +
    * «Из карточки» – должна отображаться HTML-страница, код которой хранится в поле карточки, указанном в настройке `Поле данных`;
    * «Из файла» – должна отображаться HTML-страница из файла, путь к которому указан в настройке `URL`;
    * «Внешний ресурс» – должна отображаться HTML-страница, адрес которой указан в настройке `URL`.
    +
    В режиме «Внешний ресурс» HTML-страницы будут открываться во фрейме; в режимах «Из файла» и «Из карточки» – встраиваться в HTML-код страницы {wc}а. Особенности размещения страницы во фрейме и встраивании в HTML-код приведены в конце раздела.
  Стандартный css класс;;
    Название CSS класса, в котором определен стандартный стиль элемента управления.
Размеры::
  Высота;;
    Высота фрейма.
  Ширина;;
    Ширина фрейма.
    +
    Значения высоты и ширины фрейма указываются с единицей измерения (например, «100px»).
    +
    Настройки «Высота» и «Ширина» отображаются, когда выбран режим «Внешний ресурс».
События::
  При наведении курсора;;
    Вызывается при входе курсора мыши в область элемента управления.
  При отведении курсора;;
    Вызывается, когда курсор мыши покидает область элемента управления.
  При щелчке;;
    Вызывается при щелчке мыши по любой области элемента управления.

=== Отличительные особенности внедрения HTML-страницы от открытия страницы во фрейме

Если для отображения HTML-страницы используется фрейм (выбран режим «Внешний ресурс»), страница отображается в отдельном окне браузера, размещенном внутри страницы {wc}а, при этом:

* стили, используемые {wc}ом, не распространяются на содержимое фрейма;
* HTML-страница загружается асинхронно с загрузкой страницы {wc}а.

Если HTML-страница внедряется (без использования фрейма), HTML-код страницы добавляется к HTML-коду страницы {wc}а без преобразований, при этом:

* в коде внедряемой страницы не должно быть тегов head, body и style;
* внедряемый код должен быть безопасным, т.к. данный код вставляется без изменений – иначе используйте фрейм, с установленным флагом «Использовать sandbox фрейма».

=== Особенности использования изображений и стилей

Если для отображения HTML-страницы используется фрейм (режим «Внешний ресурс»):

* путь к ресурсам (изображение, скрипт) указывается относительно файла HTML-страницы, например:
+
[source,,l]
----
<img src="images/pic.jpg" /> 
----
* стиль подключается стандартным образом – в теге body.

Если для отображения HTML-страницы используется внедрение:

* путь к ресурсам указывается относительно корня сайта, например:
+
[source,,l]
----
<img src="Content\Extensions\HtmlPages\imgages\pic.jpg" />
----
* CSS файл со стилями размещается в папке [.ph .filepath]`Site\Content\Solutions\<Название решения>\Styles` или [.ph .filepath]`Site\Content\Extensions\<Название расширения>\Styles` каталога установки модуля «{wc}а».

*На уровень выше:* xref:SpecialControls.adoc[Специальные]
