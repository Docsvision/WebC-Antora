
== Записи справочника сотрудников

Элемент управления *Записи справочника сотрудников* предназначен для выбора записей из _Справочника сотрудников_. Пользователь может выбирать (в зависимости от настроек) сотрудников, организации, подразделения, группы, роли и должности, а также поисковые слова.

Вариант отображения ЭУ зависит от настройки `Режим                 редактирования`:

* Редактирование -- в данном режиме ЭУ предоставляет возможность добавлять и удалять записи.
+
image::staffDirectoryItemsEditMode.png[[.fig--title-label]##Figure 1. ##Элемент управления «Сотрудники» в режиме редактирования]
+
Пользователь может выполнять быстрый поиск и выбирать записи из справочника.

image::staffDirectoryItemsStaff.png[[.fig--title-label]##Figure 2. ##Окно выбора записей из Справочника сотрудников с выбранными значениями]
* Без редактирования -- в данном режиме в ЭУ отображается список выбранных записей из связанной секции карточки.
+
image::staffDirectoryItemsViewMode.png[[.fig--title-label]##Figure 3. ##Элемент управления «Сотрудники» в режиме редактирования]
* По месту -- при открытии карточки в ЭУ отображается список выбранных записей из связанной секции карточки. Изменения списка осуществляется в отдельном окне (открывается при щелчке по текущему значению).

== Свойства

Общие::
Название ЭУ:::
Название типа элемента управления.
Название:::
Уникальное название элемента управления.
Внешний вид::
Заполнитель:::
Текст, отображаемый в элементе управления, когда значение не выбрано.
+
`*Локализуемый*`
Отображать метку без значения:::
Определяет вариант отображения метки.
* Когда флаг установлен, текст метки отображается всегда.
* Когда флаг не установлен, текст метки отображается только, если задано значение ЭУ.
Подсказка:::
Содержимое всплывающей подсказки.
+
`*Локализуемый*`.
Текст метки:::
Содержимое метки, отображаемой слева от элемента управления.
+
`*Локализуемый*`
Формат отображения подсказки к сотрудникам:::
Формат отображения данных о сотруднике, отображаемых во всплывающей подсказке к записи Сотрудник. Возможные варианты:
+
* ФИО
* ФИО+Должность
* Не используется -- во всплывающей подсказке отображается текст из поля Подсказка
Формат отображения сотрудников:::
Формат отображения данных о сотруднике, отображаемых в записях Сотрудник. Возможные варианты:
+
* Фамилия И.О.
* Строка отображения (формат установленный в Справочнике сотрудников)

Данные::
Источник данных:::
Коллекционная или структурная секция карточки или связанной карточки, содержащая данные для элемента управления.
+
Для выбора источника данных нажмите кнопку image:buttons/bt_dots.png[Три точки]. Будет открыто окно:

image::staffDirectoryItemsConf.png[[.fig--title-label]##Figure 4. ##Выбор источника данных для элемента управления]
+
Настройки источника содержат следующие элементы:

* Секция -- выбор секции с полями со значениями элемента управления. Если к разметке подключены дополнительные источники данных, для выбора будут доступны секции карточки и дополнительных источников.
* Столбец «Область выбора» -- при установленном флажке разрешает выбирать записи из соответствующей области (из подразделений, из группы и т.д.).
* Столбец «Доступность выбор значений соответствующего типа» -- при установленном флажке разрешает выбирать записи соответствующего типа (сотрудников, подразделения и т.д.).
** Поле для выбора поля карточки со значением записи соответствующего типа. Если поле не указано, возможность выбора значений данного типа будет недоступна.
** «Только из» -- при установленном значении ограничивает возможность выбора записей: пользователи смогут выбирать записи только из указанного элемента и его дочерних элементов.
+
Например, чтобы разрешить выбирать только сотрудников и только из подразделений/организаций, но не разрешать выбирать сами подразделения, должны быть установлены два флажка:

. *Доступность выбор значений соответствующего типа* в строке «Сотрудник». Также должно быть выбрано поле карточки, содержащее значение типа «Сотрудник».
. *Область выбора* в строке «Подразделение».

Чтобы разрешить выбирать только подразделения (другие типы записей, в т.ч. сотрудники будут недоступны для выбора), должны быть установлены два флажка:

. *Область выбора* в строке «Подразделение».
. *Доступность выбор значений соответствующего типа* в строке «Подразделение». Также должно быть выбрано поле карточки, содержащее значение типа «Подразделение».
Операция редактирования:::
Выбор операции редактирования значения элемента управления. Если операция недоступна пользователю, то изменение значения элемента управления также недоступно. Если операция не выбрана, то возможность редактирования значения элемента управления не проверяется.
+
Если значение `*Операции редактирования*` наследуется от родительского Блока, название настройки меняется на `*Операция редактирования (наследовано)*`.
Операция редактирования для видимости:::
Определяет операцию, которая должна быть доступна пользователю для показа данного элемента управления. Действие настройки зависит от значения настройки _Видимость_:
+
* Когда флаг `*Видимость*` установлен и выбрана _операция редактирования для видимости_, видимость элемента определяется исходя из доступности пользователю выбранной операции редактирования.
* Когда флаг `*Видимость*` установлен, и _операция редактирования для видимости_ НЕ выбрана, ЭУ отображается всегда.
* Когда флаг `*Видимость*` НЕ установлен, ЭУ всегда скрыт.
Поведение::
Видимость:::
Настройка видимости. Элемент управления отображается в карточке, когда флаг установлен и не отображается вместе с содержимым, когда флаг снят.
+
`*Адаптивный*`
Дополнительные css классы:::
Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
Задержка поиска (мс):::
Интервал времени от ввода символа в строку поиска до выполнения быстрого поиска. По умолчанию 500 мс.
Использование последних:::
Определяет, требуется ли отображать последние выбранные записи. Последние выбранные записи отображаются при выборе элемента управления (только в режиме «Редактирование»), а также при нажатии клавиш «Вниз» и «Пробел». Максимум отображаемых десять записей.
+
При работе в карточках Задание и Группа заданий в списке отображаются последние исполнители, в других карточках -- последние выбранные записи.
Множественный выбор:::
При установленном флаге разрешается выбирать несколько записей из Справочника сотрудников. Если флаг снят, пользователи смогут выбирать только одно значение. Настройка доступна только при работе с табличной секцией.
Обязательное:::
Определяет требование к заполнению значения ЭУ до сохранения карточки: флаг установлен -- значение должно быть присвоено, иначе карточка не будет сохранена (ЭУ помечается предупреждающим сообщением); флаг не установлен -- присваивать значение не обязательно.
Отключен:::
Когда флаг установлен, отключается возможность изменить значения элемента управления. Работает совместно со свойством `*Операция редактирования*`: если одно из свойств запрещает редактирования, редактирование будет запрещено.
+
`*Адаптивный*`
Переходить по TAB:::
Флаг определяет последовательность перехода по ЭУ карточки при нажатии кнопки kbd:[TAB]. Если флаг установлен, переход по kbd:[TAB] разрешён.
Режим редактирования:::
Определяет вариант отображения элемента управления и возможность изменения его значения:
+
* "По месту" -- значение изменяется в отдельном окне, которое открывается при щелчке мыши по элементу управления. Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
* "Редактирование" -- значение изменяется непосредственно в элементе управления. Данный вариант может быть выбран в разметке режима редактирования и просмотра.
+
Если элемент с режимом "Редактирование" добавлен в разметку просмотра, необходимо самостоятельно обеспечить возможность сохранения его значения с использованием скриптов карточек.
* "Без редактирования" -- значение изменить нельзя.
Сотрудник по умолчанию:::
Определяет для элемента управления значение по умолчанию:
+
* «Не задан» -- значение по умолчанию не установлено,
* «Текущий пользователь» -- по умолчанию будет выбран текущий сотрудник.
+
Возможность выбора сотрудника по умолчанию доступна, если в настройке «Источник данных» включена возможность выбора сотрудников.
Стандартный css класс:::
Название CSS класса, в котором определен стандартный стиль элемента управления.
События::
Перед выбором значения:::
Вызывается перед выбором значения элемента управления.
Перед загрузкой результатов поиска:::
Вызывается перед загрузкой результатов поиска.
Перед закрытием окна редактирования:::
Вызывается перед закрытием окна редактирования в режиме редактирования "По месту".
Перед закрытием окна справочника:::
Вызывается перед закрытием окна выбора значения из справочника.
Перед открытием окна редактирования:::
Вызывается перед открытием окна редактирования в режиме редактирования "По месту".
Перед открытием окна справочника:::
Вызывается перед открытием окна выбора значения из справочника.
Перед удалением значения:::
Вызывается перед удалением значения элемента управления.
После выбора значения:::
Вызывается после выбора значения из справочника.
После загрузки результатов поиска:::
Вызывается после загрузки результатов поиска.
После закрытия окна редактирования:::
Вызывается после закрытия окна редактирования в режиме редактирования "По месту".
После закрытия окна справочника:::
Вызывается после закрытия окна выбора значения из справочника.
После изменения текущего фильтра:::
Вызывается после изменения фильтра отображаемых значений элемента управления.
После открытия окна редактирования:::
Вызывается после открытия окна редактирования в режиме редактирования "По месту".
После открытия окна справочника:::
Вызывается после открытия окна выбора значения из справочника.
После удаления значения:::
Вызывается после удаления значения элемента управления.
При изменении текущего фильтра:::
Вызывается перед изменением фильтра отображаемых значений элемента управления.
При наведении курсора:::
Вызывается при входе курсора мыши в область элемента управления.
При отведении курсора:::
Вызывается, когда курсор мыши покидает область элемента управления.
При получении фокуса:::
Вызывается, когда элемент управления выбирается.
При потере фокуса:::
Вызывается, когда выбор переходит к другому элементу управления.
После смены данных:::
Вызывается после изменения содержимого элемента управления.
При щелчке:::
Вызывается при щелчке мыши по любой области элемента управления.
