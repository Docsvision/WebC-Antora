
== Задания

Элемент управления [.dfn .term]_Задания_ предназначен для создания и отображения связанных заданий и групп заданий карточки.

image::controls_task.png[[.fig--title-label]##Рис. 1. ##Пример элемента управления «Задания» со списком связанных заданий карточки]

В списке заданий отображаются только задания и группы заданий непосредственно связанные с карточкой; задания большей глубины вложенности не отображаются.

Данный ЭУ может быть добавлен только в разметку, предназначенную для просмотра карточек.

[NOTE]
====
[.note__title]#Важное замечание:# Обратите внимание, после изменения разметок данной группы, для отображений изменений потребуется перезапуск IIS.
====

=== Свойства

Общие::
Название ЭУ:::
Название типа элемента управления.
Название:::
Уникальное название элемента управления.
Внешний вид::
Дайджест представления:::
Определяет формат отображения списка заданий карточки: флаг установлен - отображаются названия заданий и значки состояний; флаг не установлен - отображается название задания, ФИО исполнителя, срок окончания и состояние задания/группы заданий
+
image::controls_task_sample_digest.png[[.fig--title-label]##Рис. 2. ##Список заданий в режиме Дайджест]
Заголовок:::
Текст, который будет отображаться над блоком элемента управления. Заголовок выделяется жирным шрифтом.
+
xref:sc_localization.adoc[Локализуемый].
Данные::
Расширенный источник данных:::
Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
Источник данных:::
Секция карточки, содержащая данные элемента управления.
Поле данных:::
Поле карточки, содержащее ссылку на карточку [.dfn .term]_Список ссылок на карточки заданий_.
Виды заданий для отображения:::
Выбор видов отображаемых в списке заданий. Если значение не указано, то в списке отображаются связанные задания всех видов.
Виды заданий для создания:::
Выбор видов заданий, которые могут быть созданы из карточки.
+
Для каждого вида может быть указано собственное отображаемое название.
+
image::controls_task_kinds.png[[.fig--title-label]##Рис. 3. ##Форма для выбора видов карточек]
+
Флаг [.ph .uicontrol]*К согласованию* включает возможность создания в согласовании подчиненного задания согласования -- в настройках этапа согласования должна быть включена настройка «Разрешить создание подчиненных заданий».
+
При установленном флаге, в список видов карточек добавляется вид «Подчиненные к согласованию».
+
image::controls_task_childaprov.png[[.fig--title-label]##Рис. 4. ##Форма для выбора видов карточек с установленным флагом К согласованию]
+
Флаг [.ph .uicontrol]*Использовать настройки Задания* включает режим, при котором список видов заданий, которые могут быть созданы с помощью ЭУ, будет получен из Справочника видов карточек. Данный режим предназначен для настройки разметок карточки Задание. Если флаг установлен, виды подчиненных заданий и групп заданий будут получены из настроек «Виды подчиненного задания» и «Виды подчиненной группы заданий». При этом действуют следующие правила:
+
* создание подчиненных заданий будет недоступно, если в Справочнике видов карточек используется режим «Выбор из ограниченного списка», но виды в списке не выбраны;
* если настройки вида задания предусматривают возможность создания подчиненного задания единственного вида, то при создании будет выбран этот вид (диалоговое окно выбора вида не отображается);
* при создании подчиненных заданий учитываются настройки переноса значений полей и ссылок из родительского задания.
+
При установленном флаге [.ph .uicontrol]*Использовать настройки Задания* возможность добавления видов карточек блокируется.
Операция редактирования:::
Выбор операции редактирования для добавления связанных заданий. Если значение не задано, то добавление будет доступно всем, если добавление разрешено.
+
Если значение [.dfn .term]_Операции редактирования_ наследуется от родительского Блока, название настройки меняется на «Операция редактирования (наследовано)».
Операция редактирования для видимости:::
Определяет операцию, которая должна быть доступна пользователю для показа данного элемента управления. Действие настройки зависит от значения настройки [.dfn .term]_Видимость_:
+
* флаг `*Видимость*` установлен, [.dfn .term]_операция редактирования для видимости_ выбрана -- видимость элемента определяется доступностью пользователю выбранной операции редактирования;
* флаг `*Видимость*` установлен, [.dfn .term]_операция редактирования для видимости_ НЕ выбрана -- ЭУ всегда отображается;
* флаг `*Видимость*` НЕ установлен -- ЭУ всегда скрыт.
Создание групп заданий:::
Определяет возможность создания новой группы заданий из элемента управления: флаг установлен - создание групп заданий разрешено.
Создание заданий:::
Определяет возможность создания нового задания из элемента управления: флаг установлен - создание заданий разрешено.
Поведение::
Видимость:::
Настройка видимости: флаг установлен -- элемент управления отображается в карточке; флаг не установлен -- элемент управления (а также его содержимое) не отображается в карточке.
+
[.dfn .term]_Адаптивный_.
Дополнительные css классы:::
Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
Отключен:::
При установленном флаге отключает возможность изменения значения элемента управления. Работает совместно со свойством «Операция редактирования»: если одно из свойств запрещает редактирования -- редактирование будет запрещено.
+
[.dfn .term]_Адаптивный_.
Загружать синхронно (шт):::
Определяет максимальное количество элементов списка, при котором должна использоваться синхронная загрузка данных. Если количество элементов больше указанного, то все данные будут загружаться асинхронно.
Переходить по TAB:::
Определяет пользовательскую последовательность очередности обхода карточки по кнопке [.ph .uicontrol]*TAB*. Флаг установлен -- переход по кнопке [.ph .uicontrol]*TAB* разрешен.
Режим открытия:::
Определяет способ открытия ссылки:
+
* «Текущая вкладка» -- ссылка будет открыта в текущей вкладке;
* «Новая вкладка» -- ссылка будет открыта в новой вкладке;
* «Новое окно браузера» -- ссылка будет открыта в новом окне веб-браузера.
Режим отображения:::
Определяет вариант отображения элемента управления в карточке:
+
* "Список и создание" - в ЭУ отображаются задания (в формате, определенном настройкой "Дайджест представления") и кнопка создания нового задания или группы заданий;
* "Только создание" - в ЭУ отображается кнопка создания нового задания или группы заданий;
* "Родитель" - в элементе управления отображается ссылка на родительское задание. Для работы ЭУ в данном режиме в настройке `Поле                         данных` должно быть указано поле карточки, содержащее ссылку на родительское задание.
Стандартный css класс:::
Название CSS класса, в котором определен стандартный стиль элемента управления.
События::
Перед разворачиванием:::
Вызывается перед разворачиванием списка заданий кнопкой image:buttons/bt_expand.png[Развернуть].
Перед сворачиванием:::
Вызывается перед сворачиванием списка заданий кнопкой image:buttons/bt_collapse.png[Свернуть].
Перед созданием задания:::
Вызывается перед созданием задания.
После загрузки заданий:::
Вызывается после загрузки заданий.
При наведении курсора:::
Вызывается при входе курсора мыши в область элемента управления.
При отведении курсора:::
Вызывается, когда курсор мыши покидает область элемента управления.
При разворачивании:::
Вызывается после разворачивания списка заданий кнопкой image:buttons/bt_expand.png[Развернуть].
При сворачивании:::
Вызывается после сворачивания списка заданий кнопкой image:buttons/bt_collapse.png[Свернуть].
При щелчке:::
Вызывается при щелчке мыши по любой области элемента управления.
