
== Ссылки

Элемент управления [.ph .uicontrol]*Ссылки* предназначен для работы со списком ссылок карточки.

Элемент управления всегда работает в режиме редактирования по месту как в разметке редактирования, так и в разметке просмотра. Это значит, что добавленная ссылка сохранится всегда, даже если изменения в карточке не были сохранены.

Вариант отображения [.dfn .term]_ЭУ_, а также его функциональные возможности зависят от настройки `Режим отображения`, которая может иметь значение «по умолчанию» или «простой».

image::controls_linklist_sample.png[[.fig--title-label]##Рис. 1. ##Пример отображения элемента управления «Ссылки» в режиме По умолчанию]

[.dfn .term]_ЭУ_ в режиме «По умолчанию» позволяет:

* просматривать список существующих ссылок;
* добавлять ссылки на существующие карточки с использованием формы поиска и выбора карточки:
+
image::control_links_selectcard.png[[.fig--title-label]##Рис. 2. ##Выбор ссылки на карточку]
* создавать новые с добавлением ссылок;
* добавлять гиперссылки;
* добавлять файлы;
* ограничивать возможность добавления ссылок;
* просматривать информацию о ссылке и добавлять описание к ней.

Возможность выполнения определенной операции со списком ссылок определяется доступностью соответствующей операции по ролевой модели.

image::linklist_simple.png[[.fig--title-label]##Рис. 3. ##Пример отображения элемента управления «Ссылки» в режиме Простой]

[.dfn .term]_ЭУ_ в режиме «Простой» позволяет:

* просматривать список существующих ссылок;
* просматривать информацию о ссылке и добавлять описание к ней.

Описание ссылки в таблице ссылок, а также справка о ссылке могут быть настроены. См. пункт xref:LinksLinkDescription.adoc[Настройка отображения информации о ссылке в элементе управления Ссылки].

К карточкам, ссылки на которые содержатся в ЭУ, могут применяться групповые операции. См. пункт xref:LinksBatchOperations.adoc[Настройка групповых операций в элементе управления Ссылки].

=== Свойства

Общие::
Название ЭУ:::
Название типа элемента управления.
Название:::
Уникальное название элемента управления.
Внешний вид::
Вид дополнительной информации:::
Определяет способ формирования справки о ссылке (открывается при нажатии кнопки image:buttons/bt_linkInfo.png[Информация]):
+
* «Только о ссылке» -- в справке будут отображаться: автор ссылки, тип ссылки и описание;
* «Только о карточке» -- в справке будет отображаться информация о карточке, на которую указывает ссылка. Формат отображения информация о карточке определяется разметкой с режимом «Справка» (см. ссылку на настройку выше);
* «О карточке и о ссылке» -- в справку будут включены информация о ссылке и о карточке (настраивается разметкой), на которую указывает ссылка;
* «Не показывать» -- не показывать кнопку для открытия справки.
+
image::control_LinkInfo.png[[.fig--title-label]##Рис. 4. ##Отображение информации о ссылке и о карточке в окне справки]
Заголовок:::
Текст, который отображается над ссылками. Заголовок выделяется жирным шрифтом. Рядом с заголовком отображается число ссылок.
+
[.dfn .term]_Локализуемый_.
Колонки:::
Определяет набор колонок отображаемых по умолчанию в таблице ссылок. Если настройка `Разрешить настройку столбцов` активна, пользователям будет предоставлена возможность изменить набор отображаемых столбцов.
+
image::control_links_confcollumns.png[[.fig--title-label]##Рис. 5. ##Настройки отображения колонок в таблице ссылок]
Метод для описания:::
Определяет способ формирования информации о ссылке в таблице ссылок:
+
* «Стандарт» -- в таблице будет отображаться дайджест карточки;
* «Расширение» -- в таблице будет отображаться информация о карточке, возвращаемая серверным расширением {wc}а (в параметре «Наименование метода для описания» должно быть указано название метода, предоставляемого расширением);
* «Разметка» -- в таблице будет отображаться информация о карточке, формируемая разметкой с режимом выбора «Описание». Если у карточки, на которую указывает ссылка, отсутствует разметка с режимом выбора «Описание», в ссылке будет использоваться дайджест карточки.
+
Настройка применяется только к ссылкам на карточки.
Наименование метода для описания:::
Название метода расширения {wc}а, возвращающего описание ссылки. См. [.dfn .term]_Руководство программиста_, пункт «Разработка расширения для формирования описаний ссылок».
+
Для карточек «Исходящий», «Входящий», «Заявка», «ОРД», «Рабочий», «Служебная записка», «Договор», «Акт» и «Доп. соглашение» предоставляется стандартный метод для описания: «DocumentManagement_Default».
Разрешить настройку столбцов:::
Разрешает/запрещает пользователям самостоятельно формировать список столбцов, отображаемых таблице ссылок.
Режим отображения:::
Определяет способ работы с элементом управления:
+
* «По умолчанию» -- обычный способ работы с предоставлением полного набор команд управления ссылками, в соответствии с правами пользователя;
* «Простой» -- режим работы, предназначенный только для отображения ссылок: команды редактирования будут недоступны, тип и значок ссылки -- скрыты.

Данные::
Расширенный источник данных:::
Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
Источник данных:::
Секция карточки, содержащая данные элемента управления.
Поле данных:::
Поле карточки, содержащее ссылку на карточку [.dfn .term]_Список ссылок на карточки_.
Операция редактирования:::
Выбор операции для редактирования значения элемента управления. Если операция недоступна пользователю, то изменения списка ссылок или добавления комментария к ссылке будет недоступно. Если операция не выбрана, то возможность редактирования значения элемента управления не проверяется.
+
Если значение [.dfn .term]_Операции редактирования_ наследуется от родительского Блока, название настройки меняется на «Операция редактирования (наследовано)».
Хранить сильную ссылку:::
Определяется тип ссылки на карточку. Если флаг установлен, то используется сильная ссылка.
Поведение::
Видимость:::
Настройка видимости: флаг установлен -- элемент управления отображается в карточке; флаг не установлен -- элемент управления (а также его содержимое) не отображается в карточке.
+
`*Адаптивный*`.
Добавить гиперссылку:::
Настройка параметров добавления/просмотра ссылки на URL-адрес.
+
image::controls_linklist_addhyperlinkconfig.png[[.fig--title-label]##Рис. 6. ##Настройки добавления гиперссылки]
+
Можно включить или отключить возможность добавления новой гиперссылки, при этом соответствующая кнопка будет показана или скрыта. Также можно указать операцию редактирования, при которой добавление гиперссылок будет разрешено. В поле [.kbd .ph .userinput]`Протокол по умолчанию` нужно указать протокол, который будет добавляться к адресу, введенному пользователем, если в адресе не указан конкретный протокол («http», «https», «ftp» и т.п.). Если операция редактирования не указана, то добавление ссылок будет доступно всем.
Добавить ссылку:::
Настройка параметров добавления/просмотра ссылки на существующую карточку.
+
image::controls_linklist_addlinkconfig.png[[.fig--title-label]##Рис. 7. ##Настройки добавления ссылки]
+
Можно включить или отключить возможность добавления новой ссылки, при этом соответствующая кнопка будет показана или скрыта. Также можно указать операцию редактирования, при которой добавление ссылок будет разрешено, а также возможные типы ссылок. Если операция редактирования не указана, то добавление ссылок будет доступно всем. Настройка `Типы карточек` позволяет установить ограничение по типам карточек, на которые можно ссылаться:

* можно выбрать один или несколько типов карточек, на которые разрешено ссылаться;
* если типы карточек не выбраны, допускается добавление ссылок на карточки любых типов.
+
«Поисковый запрос» -- открывает окно выбора поискового запроса, который будет использоваться в режиме поиска карточек при добавлении ссылок в режиме выбора «Везде».
+
image::control_links_selectquery.png[[.fig--title-label]##Рис. 8. ##Выбор поискового запроса]
+
По умолчанию используется собственный поисковый запрос {wc}а: «Ссылки». Данный запрос позволяет искать карточки по дайджесту, автору, дате создания и изменения.
+
«Список папок» -- открывает окно добавления папок (по идентификаторам), из которых пользователь сможет выбирать карточки для добавления ссылок в режиме выбора «В текущей папке».
+
image::control_links_selectfolders.png[[.fig--title-label]##Рис. 9. ##Список папок]

Если список папок пуст, не отмечено ни одной добавленной папки или переключатель «Все папки / Только выбранные папки» в положении «Все папки», пользователь сможет добавлять ссылки на карточки из любых доступных папок.
Добавить файл:::
Настройка параметров добавления/просмотра ссылки на файл.
+
image::controls_linklist_addfileconfig.png[[.fig--title-label]##Рис. 10. ##Настройки добавления файла]
+
Диалоговое окно настройки добавления файла содержит:

* флаг [.ph .uicontrol]*Доступно* -- включает/выключает возможность добавления файла с помощью элемента управления «Ссылки»;
* поле [.ph .uicontrol]*Операция* -- операция редактирования, которая должна быть доступна пользователю для разрешения добавления файла;
* поле [.ph .uicontrol]*Тип ссылок* -- тип ссылки, с которой будут добавляться файлы;
* поле [.ph .uicontrol]*Вид файла* -- вид карточки, которая будет создаваться для добавляемого файла.
+
Файл может быть добавлен с помощью кнопки image:buttons/attach_file.png[Скрепка] (может быть выбрано несколько файлов) или «перетаскиванием» из ФС (может быть добавлено несколько файлов). При добавлении файлов, для каждого файла будет создана карточка вида [.ph .uicontrol]*Вид файла*.
+
Пользователь может открыть файл (щелкнув по названию файла в списке ссылок) или карточку файла (из меню image:buttons/bt_kebab.png[Три вертикальные точки]), удалить ссылку на файл или сам файл. Файл может быть удален, если на него ссылается только данная карточка: если карточка файла содержит только один файл, то будет удалена его карточка и ссылка на неё, если несколько файлов -- из карточки файла будет удален только выбранный файл.
Дополнительные css классы:::
Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
Загружать синхронно (шт):::
Определяет максимальное количество элементов списка, при котором должна использоваться синхронная загрузка данных. Если количество элементов больше указанного, то все данные будут загружаться асинхронно.
Изменение:::
Выбор операции редактирования, при которой возможно изменение списка ссылок.
Операция редактирования для видимости:::
Определяет операцию, которая должна быть доступна пользователю для показа данного элемента управления. Действие настройки зависит от значения настройки [.dfn .term]_Видимость_:
+
* флаг `*Видимость*` установлен, [.dfn .term]_операция редактирования для видимости_ выбрана -- видимость элемента определяется доступностью пользователю выбранной операции редактирования;
* флаг `*Видимость*` установлен, [.dfn .term]_операция редактирования для видимости_ НЕ выбрана -- ЭУ всегда отображается;
* флаг `*Видимость*` НЕ установлен -- ЭУ всегда скрыт.
Отключен:::
При установленном флаге отключает возможность изменения значения элемента управления. Работает совместно со свойством «Операция редактирования»: если одно из свойств запрещает редактирования -- редактирование будет запрещено.
+
`*Адаптивный*`.
Отображать раскрытым:::
Определяет начальное состояние блока элемента управления: флаг установлен - список ссылок отображается; флаг не установлен - список ссылок скрыт, отображается только заголовок и количество ссылок.
+
`*Адаптивный*`.
Переходить по TAB:::
Определяет пользовательскую последовательность очередности обхода карточки по кнопке [.ph .uicontrol]*TAB*. Флаг установлен -- переход по кнопке [.ph .uicontrol]*TAB* разрешен.
Показывать файлы для ссылок:::
Настройка типов ссылок, для которых должен действовать особый режим отображения, при котором в ЭУ отображается не карточка, на которую ссылка, а её файлы (основные и дополнительные).
+
Пользователь может открыть файл (щелкнув по названию файла в списке ссылок) или карточку файла (из меню image:buttons/bt_kebab.png[Три вертикальные точки]), удалить ссылку на карточку или файл из карточки, на которую ссылка. Если настройка [.keyword .wintitle]*Показывать файлы для ссылок* не задана для карточки, то возможность скачать файл из такой карточки будет недоступна.
Создать ссылку:::
Настройка параметров создания карточки с добавлением ссылки.
+
image::controls_linklist_attachlinkconfig.png[[.fig--title-label]##Рис. 11. ##Настройки создания карточки с добавлением ссылки]
+
Можно включить или отключить возможность создания ссылки с созданием карточки, при этом соответствующая кнопка будет показана или скрыта. Также можно указать операцию редактирования, при которой создание ссылок будет разрешено, а также доступные для выбора типы ссылок. Если операция редактирования не указана, то добавление ссылок будет доступно всем.
+
Настройка `Виды карточек` позволяет указать виды карточек, которые можно создавать по ссылке:

* можно выбрать один или несколько видов карточек, на которые разрешено ссылаться;
* если вид карточек содержит подвиды, то при установленном в данной настройке флаге "С дочерними видами", они также будут доступны для создания карточек по ссылке.

Если вид или виды карточек не выбраны, то добавление ссылки с созданием карточки будет невозможно.
+
Функция создания карточки с добавлением ссылки недоступна в разметке редактирования карточки (при создании или изменении).
Стандартный css класс:::
Название CSS класса, в котором определен стандартный стиль элемента управления.
Удаление:::
Выбор операции редактирования, при которой возможно удаление ссылки.
События::
Перед добавлением ссылки на новую карточку:::
Вызывается перед добавлением ссылки на новую карточку.
Перед добавлением ссылки на существующую карточку:::
Вызывается перед добавлением ссылки на существующую карточку.
Перед загрузкой ссылки на файл:::
Вызывается перед загрузкой ссылки на файл.
Перед закрытием тултипа с информацией о карточке:::
Вызывается перед закрытием окна (открытого кнопкой image:buttons/bt_showinfo.png[Информация]) с информацией о карточке.
Перед открытием карточки:::
Вызывается перед открытием карточки из списка ссылок.
Перед открытием предпросмотра карточки:::
Вызывается перед открытием предварительного просмотра карточки.
Перед открытием тултипа с информацией о карточке:::
Вызывается перед открытием (кнопкой image:buttons/bt_showinfo.png[Информация]) окна с информацией о карточке, на которую указывает ссылка.
Перед разворачиванием:::
Вызывается перед разворачиванием [.dfn .term]_ЭУ_ кнопкой image:buttons/bt_expand.png[Развернуть].
Перед редактированием комментария к ссылке:::
Вызывается перед редактированием (в окне информации о карточке) комментария к ссылке.
Перед сворачиванием:::
Вызывается перед сворачиванием [.dfn .term]_ЭУ_ кнопкой image:buttons/bt_collapse.png[Свернуть].
Перед удалением ссылки:::
Вызывается перед удалением ссылки.
Перед удалением файла:::
Вызывается перед удалением ссылки на файл.
После добавления ссылки на существующую карточку:::
Вызывается после добавления ссылки на существующую карточку.
После загрузки ссылки на файл:::
Вызывается после добавления ссылки на файл.
После изменения выделения:::
Вызывается после изменения выделения.
После переключения режима групповых операций:::
Вызывается после переключения режима групповых операций.
После разворачивания:::
Вызывается после разворачивания [.dfn .term]_ЭУ_ кнопкой image:buttons/bt_expand.png[Развернуть].
После редактирования комментария к ссылке:::
Вызывается после сохранения комментария (в окне информации о карточке) к ссылке.
После сворачивания:::
Вызывается после сворачиванием [.dfn .term]_ЭУ_ кнопкой image:buttons/bt_collapse.png[Свернуть].
После удаления ссылки:::
Вызывается после удаления ссылки.
После удаления файла:::
Вызывается после удаления файла.
При наведении курсора:::
Вызывается при входе курсора мыши в область элемента управления.
При отведении курсора:::
Вызывается, когда курсор мыши покидает область элемента управления.
При щелчке:::
Вызывается при щелчке мыши по любой области элемента управления.

* *xref:LinksLinkDescription.adoc[Настройка отображения информации о ссылке в элементе управления Ссылки]* +
* *xref:LinksBatchOperations.adoc[Настройка групповых операций в элементе управления Ссылки]* +
