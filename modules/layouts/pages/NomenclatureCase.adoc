
== Дело

Элемент управления [.ph .uicontrol]*Дело* предназначен для списания текущего документа в выбранное дело [.dfn .term]_Справочника номенклатуры дел_.

Вариант отображения [.dfn .term]_ЭУ_ зависит от настройки `Режим             редактирования`:

* Редактирование - [.dfn .term]_ЭУ_ в данном режиме может быть использован только в разметке режима редактирования карточки. В режиме `Редактирование` поддерживается быстрый поиск и выбор из [.dfn .term]_Справочника_.
+
image::caseControl.png[[.fig--title-label]##Рис. 1. ##Элемент управления «Дело» в режиме редактирования]
+
[NOTE]
====
[.note__title]#Прим.:#

Поиск осуществляется по заголовку и индексу всех дел справочника, а также по наименованию и индексу разделов. Быстрый поиск по умолчанию осуществляется по наиболее близкому к текущей дате году. Чтобы выбрать дело из другого года, необходимо перейти в справочник;
====
* По месту - [.dfn .term]_ЭУ_ в данном режиме может быть использован в разметке режима чтения и редактирования карточки. Выбор и изменение дел осуществляется при нажатии на ссылку в [.dfn .term]_ЭУ_. Поиск и выбор осуществляется аналогично поиску и выбору для режима `Редактирование`.
+
[NOTE]
====
[.note__title]#Прим.:#

При быстром поиске и поиске из справочника происходит проверка прав. Это значит, что пользователь увидит только те элементы, к которым у него есть доступ на чтение, изменение и списание документа в дело.
====
+
image::writtenOfftoCaseOnplaceedit.png[[.fig--title-label]##Рис. 2. ##Элемент управления «Дело» в режиме редактирования по месту]
* Без редактирования - [.dfn .term]_ЭУ_ в данном режиме отображает дело, в которое был списан документ.
+
image::writtenOfftoCase.png[[.fig--title-label]##Рис. 3. ##Элемент управления «Дело» в режиме без редактирования]

=== Свойства

Общие::
  Название ЭУ;;
    Название типа элемента управления.
  Название;;
    Уникальное название элемента управления.
Внешний вид::
  Отображать метку без значения;;
    Определяет вариант отображения метки: флаг установлен – текст метки отображается всегда; флаг не установлен – текст метки отображается только, когда задано значение [.dfn .term]_ЭУ_.
  Подсказка;;
    Текст всплывающей подсказки, отображаемой при наведении на метку.
    +
    [.dfn .term]_Локализуемый_.
  Показывать год;;
    По умолчанию свойство активно. Свойство влияет на отображение года в пользовательском интерфейсе при открытии справочника.
  +
  Подсказка к значению;;
    Содержимое всплывающей подсказки, отображаемой при наведении курсора на строку.
    +
    [.dfn .term]_Локализуемый_.
  Текст метки;;
    Содержимое метки, отображаемой слева от элемента управления.
    +
    [.dfn .term]_Локализуемый_.

Данные::
  Расширенный источник данных;;
    Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
  Источник данных;;
    Секция карточки, содержащая данные элемента управления.
    +
    Если источник данных не определён, то при выборе дела запись об этом фиксируется в соответствующей строке секции карточки документа, а также в карточке дела добавляется ссылка на документ.
  Поле данных;;
    Поле карточки, содержащее ссылку на карточку [.dfn .term]_Список ссылок на карточки_.
    +
    Для отображения ссылки в карточке дела сохраняются следующие поля карточки документа: RefDocument, Digest и Registered (необходима привязка к полю RefCardID - Архивное дело).
  Операция редактирования;;
    Выбор операции редактирования значения элемента управления. Если операция недоступна пользователю, то изменение значения элемента управления также недоступно. Если операция не выбрана, то возможность редактирования значения элемента управления не проверяется.
    +
    Если значение [.dfn .term]_Операции редактирования_ наследуется от родительского Блока, название настройки меняется на «Операция редактирования (наследовано)».
  +
  Если в настройках [.dfn .term]_ЭУ_ [.ph .uicontrol]*«Дело»* раздел Данные не заполнен, то при добавлении документа в дело, информация о списанном документе появляется в карточке дела, а ссылка на дело в карточку документа не добавляется.
Поведение::
  Видимость;;
    Настройка видимости: флаг установлен – элемент управления отображается в карточке; флаг не установлен – элемент управления (а также его содержимое) не отображается в карточке.
    +
    [.dfn .term]_Адаптивный_.
  Дополнительные css классы;;
    Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
  Задержка поиска (мс);;
    Интервал времени от ввода символа в строку поиска до выполнения быстрого поиска. По умолчанию 500 мс.
  Обязательное;;
    Определяет требование к заполнению значения [.dfn .term]_ЭУ_ до сохранения карточки: флаг установлен – значение должно быть присвоено, иначе карточка не будет сохранена ([.dfn .term]_ЭУ_ помечается предупреждающим сообщением); флаг не установлен – присваивать значение не обязательно.
  Операция редактирования для видимости;;
    Определяет операцию, которая должна быть доступна пользователю для показа данного элемента управления. Действие настройки зависит от значения настройки [.dfn .term]_Видимость_:
    +
    * флаг [.dfn .term]_Видимость_ установлен, [.dfn .term]_операция редактирования для видимости_ выбрана – видимость элемента определяется доступностью пользователю выбранной операции редактирования;
    * флаг [.dfn .term]_Видимость_ установлен, [.dfn .term]_операция редактирования для видимости_ НЕ выбрана – ЭУ всегда отображается;
    * флаг [.dfn .term]_Видимость_ НЕ установлен – ЭУ всегда скрыт.
  Отключен;;
    При установленном флаге отключает возможность изменения значения элемента управления. Работает совместно со свойством «Операция редактирования»: если одно из свойств запрещает редактирования – редактирование будет запрещено.
    +
    [.dfn .term]_Адаптивный_.
  Режим редактирования;;
    Определяет вариант отображения элемента управления и возможность изменения его значения:
    +
    * "По месту" – значение изменяется в отдельном окне, которое открывается при щелчке мыши по элементу управления. Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
    * "Редактирование" – значение изменяется непосредственно в элементе управления. Данный вариант может быть выбран в разметке режима редактирования и просмотра.
    +
    Если элемент с режимом "Редактирование" добавлен в разметку просмотра, необходимо самостоятельно обеспечить возможность сохранения его значения с использованием скриптов карточек.
    * "Без редактирования" – значение изменить нельзя.
  Стандартный css класс;;
    Название CSS класса, в котором определен стандартный стиль элемента управления.
События::
  Перед выбором значения;;
    Вызывается перед выбором значения элемента управления.
  Перед загрузкой результатов поиска;;
    Вызывается перед загрузкой результатов поиска.
  Перед закрытием формы выбора дела;;
    Вызывается перед закрытием формы выбора дела.
  Перед открытием формы выбора дела;;
    Вызывается перед открытием формы выбора дела.
  Перед удалением значения;;
    Вызывается перед удалением значения элемента управления.
  После выбора значения;;
    Вызывается после выбора значения из справочника.
  После загрузки результатов поиска;;
    Вызывается после загрузки результатов поиска.
  После смены данных;;
    Вызывается после изменения содержимого элемента управления.
  После закрытия формы выбора дела;;
    Вызывается после закрытия формы выбора дела.
  После открытия формы выбора дела;;
    Вызывается перед открытием формы выбора дела.
  После удаления значения;;
    Вызывается после удаления значения элемента управления.
  При наведении курсора;;
    Вызывается при входе курсора мыши в область элемента управления.
  При отведении курсора;;
    Вызывается, когда курсор мыши покидает область элемента управления.
  При получении фокуса;;
    Вызывается, когда элемент управления выбирается.
  При потере фокуса;;
    Вызывается, когда выбор переходит к другому элементу управления.
  При щелчке;;
    Вызывается при щелчке мыши по любой области элемента управления.

*На уровень выше:* xref:NomenclatureofCases.adoc[Номенклатура дел]
