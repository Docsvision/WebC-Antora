= Записи справочника сотрудников

Элемент управления `_Записи справочника сотрудников_` предназначен для выбора записей из _Справочника сотрудников_. В зависимости от настроек пользователь может выбирать сотрудников, организации, подразделения, группы, роли и должности, а также поисковые слова.

Вариант отображения ЭУ зависит от свойства `*Режим редактирования*`:

* *_Редактирование_*. В данном режиме ЭУ предоставляет возможность добавлять и удалять записи.
+
.Элемент управления "Сотрудники" в режиме редактирования
image::staffDirectoryItemsEditMode.png[Элемент управления "Сотрудники" в режиме редактирования]
+
Пользователь может выполнять быстрый поиск и выбирать записи из справочника.
+
.Окно выбора записей из Справочника сотрудников с выбранными значениями
image::staffDirectoryItemsStaff.png[Окно выбора записей из Справочника сотрудников с выбранными значениями]
+
* *_Без редактирования_*. В данном режиме в ЭУ отображается список выбранных записей из связанной секции карточки.
+
.Элемент управления "Сотрудники" в режиме "Без редактирования"
image::staffDirectoryItemsViewMode.png[Элемент управления "Сотрудники" в режиме редактирования]
* *_По месту_*. При открытии карточки в ЭУ отображается список выбранных записей из связанной секции карточки. Изменение списка осуществляется в отдельном окне, открываемом при нажатии на текущее значение.

== Свойства

=== Общие

==== Название ЭУ

Название типа элемента управления.

==== Название

Уникальное название элемента управления.

=== Внешний вид

==== Заполнитель

Текст, отображаемый в элементе управления, когда значение не выбрано.

`*Локализуемый*`

==== Отображать метку без значения

Определяет вариант отображения метки.

* Когда флаг установлен, текст метки отображается всегда.
* Когда флаг не установлен, текст метки отображается только, если задано значение ЭУ.

==== Подсказка

Содержимое всплывающей подсказки.

`*Локализуемый*`

==== Текст метки

Содержимое метки, отображаемой слева от элемента управления.

`*Локализуемый*`

==== Формат отображения подсказки к сотрудникам

Формат отображения данных о сотруднике, отображаемых во всплывающей подсказке к записи Сотрудник. Возможные варианты:

* *_ФИО_*.
* *_ФИО+Должность_*.
* *_Не используется_*. Во всплывающей подсказке отображается текст из поля Подсказка.

=== Формат отображения сотрудников

Формат отображения данных о сотруднике, отображаемых в записях Сотрудник. Возможные варианты:

* *_Фамилия И.О._*.
* *_Строка отображения_* (формат установленный в Справочнике сотрудников).

=== Данные

==== Источник данных

Коллекционная или структурная секция карточки или связанной карточки, содержащая данные для элемента управления.

Чтобы выбрать источник данных нажмите кнопку image:buttons/bt_dots.png[Три точки]. Будет открыто окно:

.Выбор источника данных для элемента управления
image::staffDirectoryItemsConf.png[Выбор источника данных для элемента управления]

Настройки источника содержат следующие элементы:

"Секция":: Выбор секции с полями со значениями элемента управления. Если к разметке подключены дополнительные источники данных, для выбора будут доступны секции карточки и дополнительных источников.

Столбец "Область выбора":: При установленном флаге разрешает выбирать записи из соответствующей области (из подразделений, из группы и т.д.).

"Сотрудник", "Подразделение", "Группа", "Роль", "Должность", "Поисковое слово":::
Поля для выбора поля карточки со значением записи соответствующего типа. Если поле не указано, возможность выбора значений данного типа будет недоступна.

Столбец "Доступность выбор значений соответствующего типа":: При установленном флаге разрешает выбирать записи соответствующего типа (сотрудников, подразделения и т.д.).

"Только из"::: Если значение задано, ограничивается возможность выбора записей: пользователи смогут выбирать записи только из указанного элемента и его дочерних элементов.

.Образец настройки
====
Например, чтобы разрешить выбирать только сотрудников из подразделений или организаций, но не разрешать выбирать сами подразделения, должны быть установлены два флага:

. Доступность выбора значений соответствующего типа в строке _Сотрудник_.
+
NOTE: Также должно быть выбрано поле карточки, содержащее значение типа _Сотрудник_.
+
. *Область выбора* в строке _Подразделение_.

Чтобы разрешить выбирать только подразделения (другие типы записей, в т.ч. сотрудники будут недоступны для выбора), должны быть установлены два флажка:

. *Область выбора* в строке "Подразделение".
. *Доступность выбор значений соответствующего типа* в строке "Подразделение". Также должно быть выбрано поле карточки, содержащее значение типа "Подразделение".
====

==== Операция редактирования

Выбор операции редактирования значения элемента управления. Если операция недоступна пользователю, то изменение значения элемента управления также недоступно. Если операция не выбрана, то возможность редактирования значения элемента управления не проверяется.

Если значение `*Операции редактирования*` наследуется от родительского Блока, название свойства меняется на `*Операция редактирования (наследовано)*`.

==== Операция редактирования для видимости

Определяет операцию, которая должна быть доступна, чтобы ЭУ отображался для пользователя. Работа свойства зависит от значения свойства `*Видимость*`:

* Когда флаг `*Видимость*` установлен и выбрана _операция редактирования для видимости_, видимость элемента определяется исходя из доступности пользователю выбранной операции редактирования.
* Когда флаг `*Видимость*` установлен, и _операция редактирования для видимости_ НЕ выбрана, ЭУ отображается всегда.
* Когда флаг `*Видимость*` НЕ установлен, ЭУ всегда скрыт.

=== Поведение

==== Видимость

Настройка видимости. Элемент управления отображается в карточке, когда флаг установлен. Элемент управления и любое его содержимое не отображаются, когда флаг снят.

`*Адаптивный*`

==== Дополнительные css классы

Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.

==== Задержка поиска (мс)

Интервал времени от ввода символа в строку поиска до выполнения быстрого поиска. По умолчанию 500 мс.

==== Использование последних

Определяет, требуется ли отображать последние выбранные записи. Последние выбранные записи отображаются при выборе элемента управления (только в режиме *_Редактирование_*), а также при нажатии клавиш kbd:[&#8595;] и kbd:[Пробел]. Отображается максимум десять записей.

При работе в карточках _Задание_ и _Группа заданий_ в списке отображаются последние исполнители, в других карточках -- последние выбранные записи.

==== Множественный выбор

При установленном флаге разрешается выбирать несколько записей из Справочника сотрудников. Если флаг снят, пользователи смогут выбирать только одно значение.

TIP: Свойство доступно только при работе с табличной секцией.

==== Обязательное

Определяет требование к заполнению значения ЭУ до сохранения карточки:

* Когда флаг установлен, значение ЭУ должно быть присвоено, иначе карточка не будет сохранена. При этом ЭУ помечается предупреждающим сообщением.
* Когда флаг не установлен, присваивать значение необязательно.

==== Отключен

Когда флаг установлен, отключается возможность изменить значения элемента управления. Работает совместно со свойством `*Операция редактирования*`. Редактирование будет запрещено, если одно из свойств запрещает редактирование.

`*Адаптивный*`

==== Переходить по TAB

Флаг определяет последовательность перехода по ЭУ карточки при нажатии кнопки kbd:[TAB]. Если флаг установлен, переход по kbd:[TAB] разрешён.

==== Режим редактирования

Определяет вариант отображения элемента управления и возможность изменения его значения:

* *_По месту_*. Значение изменяется в отдельном окне, которое открывается при нажатии на элемент управления.
+
Данный вариант подходит для разметки режима редактирования и разметки режима просмотра карточки.
* *_Редактирование_*. Значение изменяется непосредственно в элементе управления.
+
Данный вариант может быть выбран в разметке режима редактирования и просмотра.
+
Если элемент с режимом *_Редактирование_* добавлен в разметку просмотра, необходимо самостоятельно обеспечить сохранение его значения. Например, с использованием скриптов карточек.
* *_Без редактирования_*. Значение изменить нельзя.

==== Сотрудник по умолчанию

Определяет для элемента управления значение по умолчанию:

* *_Не задан_*. Значение по умолчанию не установлено,
* *_Текущий пользователь_*. По умолчанию будет выбран текущий сотрудник.
+
Возможность выбора сотрудника по умолчанию доступна, если в свойстве `*Источник данных`* включена возможность выбора сотрудников.

==== Стандартный css класс

Название CSS класса, в котором определен стандартный стиль элемента управления.

=== События

==== Перед выбором значения

Вызывается перед выбором значения элемента управления.

==== Перед загрузкой результатов поиска

Вызывается перед загрузкой результатов поиска.

==== Перед закрытием окна редактирования

Вызывается перед закрытием окна редактирования в режиме редактирования *_По месту_*.

==== Перед закрытием окна справочника

Вызывается перед закрытием окна выбора значения из справочника.

==== Перед открытием окна редактирования

Вызывается перед открытием окна редактирования в режиме редактирования *_По месту_*.

==== Перед открытием окна справочника

Вызывается перед открытием окна выбора значения из справочника.

==== Перед удалением значения

Вызывается перед удалением значения элемента управления.

==== После выбора значения

Вызывается после выбора значения из справочника.

==== После загрузки результатов поиска

Вызывается после загрузки результатов поиска.

==== После закрытия окна редактирования

Вызывается после закрытия окна редактирования в режиме редактирования *_По месту_*.

==== После закрытия окна справочника

Вызывается после закрытия окна выбора значения из справочника.

==== После изменения текущего фильтра

Вызывается после изменения фильтра отображаемых значений элемента управления.

==== После открытия окна редактирования

Вызывается после открытия окна редактирования в режиме редактирования *_По месту_*.

==== После открытия окна справочника

Вызывается после открытия окна выбора значения из справочника.

==== После удаления значения

Вызывается после удаления значения элемента управления.

==== При изменении текущего фильтра

Вызывается перед изменением фильтра отображаемых значений элемента управления.

==== При наведении курсора

Вызывается при входе курсора мыши в область элемента управления.

==== При отведении курсора

Вызывается, когда курсор мыши покидает область элемента управления.

==== При получении фокуса

Вызывается, когда элемент управления выбирается.

==== При потере фокуса

Вызывается, когда выбор переходит к другому элементу управления.

==== После смены данных

Вызывается после изменения содержимого элемента управления.

==== При щелчке

Вызывается при щелчке мыши по любой области элемента управления.
