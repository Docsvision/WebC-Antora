
== Таблица

Элемент разметки [.ph .uicontrol]*Таблица* предназначен для ввода и отображения данных табличной секции карточки.

Столбцы в ЭР [.ph .uicontrol]*Таблицы* представляют собой отдельные элементы разметки – xref:Control_tablecolumn.html[Столбец таблицы]. В один [.dfn .term]_ЭР_ [.ph .uicontrol]*Таблица* может быть добавлено необходимое количество столбцов.

image::controls_table_sample.png[[.fig--title-label]##Рис. 1. ##Пример элемента разметки «Таблица»]

Таблица предоставляет возможность добавлять новые строки кнопкой image:buttons/bt_create.png[image] и удалять существующие – кнопкой image:buttons/bt_basket.png[image]. Данные кнопки отображаются, если разрешено редактирование таблицы; кнопка добавления строки может быть скрыта.

Также в таблицу могут быть добавлены новые команды.

[NOTE]
====
[.note__title]#Прим.:# Способ сохранения изменений таблицы отличается в зависимости от режима работы с ней:

* если карточка открыта с разметкой режима просмотра (таблица также в режиме просмотра), то изменение данных в ячейке сохраняется сразу после выполнения изменения;
* если карточка открыта в режиме редактирования, то все изменения таблицы сохраняются при сохранении карточки.
====

Количество отображаемых в [.dfn .term]_ЭР_ строк ограничивается настройками (по умолчанию – 15), при этом [.keyword]*не рекомендуется* связывать [.dfn .term]_ЭР_ с секцией, содержащей более 30 строк – это может привести к замедлению открытия карточки.

По умолчанию строки в таблице не сортируются: отображаются в порядке следования в связанной секции или в соответствии с реализованным разработчиком алгоритмом. Пользователю может быть предоставлена возможность вручную изменять порядок отображения строк в таблице (не сортировка) путём их перетаскивания. Для этого:

* в секции, с которой связывается таблица, должно быть числовое поле (целочисленное), в котором будет сохраняться порядок строк;
* данное поле должно быть выбрано в настройке [.dfn .term]_Сохранять номер последовательности_.

Изменение порядка отображения строк возможно в режиме редактирования «По месту» или «Редактирование». Для отображения строк с учётом заданной пользователем последовательности, поле с порядком строк должно быть указано в настройке [.dfn .term]_Сохранять номер последовательности_ разметок редактирования и просмотра.

Пример использования данного [.dfn .term]_ЭУ_ в разметке рассмотрен в разделе xref:use_table.html[Использование таблицы для работы с коллекционной секцией карточки].

=== Свойства

Общие::
  Название ЭУ;;
    Название типа элемента управления.
  Название;;
    Уникальное название элемента управления.
Внешний вид::
  Заголовок;;
    Текст, отображаемый в названии таблицы.
    +
    [.dfn .term]_Локализуемый_.
  Скрыть кнопку добавления строк;;
    При включении скрывает из пользовательского интерфейса кнопку image:buttons/bt_create.png[image].
Данные::
  Расширенный источник данных;;
    Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
  Источник данных;;
    Коллекционная секция карточки, содержащая данные для элемента управления.
  +
  Операция редактирования;;
    Выбор операции редактирования значения элемента управления. Если операция недоступна пользователю, то изменение значения элемента управления также недоступно. Если операция не выбрана, то возможность редактирования значения элемента управления не проверяется.
    +
    Если значение [.dfn .term]_Операции редактирования_ наследуется от родительского Блока, название настройки меняется на «Операция редактирования (наследовано)».
Поведение::
  Видимость;;
    Настройка видимости: флаг установлен – элемент управления отображается в карточке; флаг не установлен – элемент управления (а также его содержимое) не отображается в карточке.
    +
    [.dfn .term]_Адаптивный_.
  Дополнительные css классы;;
    Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
  Максимальное количество строк для отображения;;
    Определяет максимальное число отображаемых в [.dfn .term]_ЭР_ строк (по умолчанию - 15). Если число строк в связанной секции больше, чем данное ограничение, в конце таблицы отображается сообщение: «There are more rows, that are not shown due to table settings».
  Минимальная высота;;
    Минимальная высота элемента управления.
    +
    [.dfn .term]_Адаптивный_.
  Минимальная ширина;;
    Минимально возможная ширина элемента управления в пикселях.
    +
    [.dfn .term]_Адаптивный_.
  Операция редактирования для видимости;;
    Определяет операцию, которая должна быть доступна пользователю для показа данного элемента управления. Действие настройки зависит от значения настройки [.dfn .term]_Видимость_:
    +
    * флаг [.dfn .term]_Видимость_ установлен, [.dfn .term]_операция редактирования для видимости_ выбрана – видимость элемента определяется доступностью пользователю выбранной операции редактирования;
    * флаг [.dfn .term]_Видимость_ установлен, [.dfn .term]_операция редактирования для видимости_ НЕ выбрана – ЭУ всегда отображается;
    * флаг [.dfn .term]_Видимость_ НЕ установлен – ЭУ всегда скрыт.
  Отключен;;
    При установленном флаге отключает возможность изменения значения элемента управления. Работает совместно со свойством «Операция редактирования»: если одно из свойств запрещает редактирования – редактирование будет запрещено.
    +
    [.dfn .term]_Адаптивный_.
  Отображать свернутым;;
    Определяет начальное состояние таблицы: флаг установлен - содержимое таблицы не отображается в карточке; флаг не установлен - содержимое таблицы отображается в карточке. Проверяется только при установленном флаге [.ph .uicontrol]*Сворачиваемый*
    +
    [.dfn .term]_Адаптивный_.
  Переходить по TAB;;
    Определяет пользовательскую последовательность очередности обхода карточки по кнопке [.ph .uicontrol]*TAB*. Флаг установлен – переход по кнопке [.ph .uicontrol]*TAB* разрешен.
  Порядок;;
    Определяет xref:dl_layout_changecontrolorder.html[порядок отображения] элемента управления в родительском [.dfn .term]_Блоке_. [.dfn .term]_ЭУ_ с более низким `порядком` имеет более высокий приоритет в порядке отображения в разметке.
    +
    [.dfn .term]_Адаптивный_.
  Режим редактирования;;
    Определяет вариант отображения элемента управления и возможность изменения его значения:
    +
    * "По месту" – значение изменяется в отдельном окне, которое открывается при щелчке мыши по элементу управления. Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
    * "Редактирование" – значение изменяется непосредственно в элементе управления. Данный вариант может быть выбран в разметке режима редактирования и просмотра.
    +
    Если элемент с режимом "Редактирование" добавлен в разметку просмотра, необходимо самостоятельно обеспечить возможность сохранения его значения с использованием скриптов карточек.
    * "Без редактирования" – значение изменить нельзя.
  Сворачиваемый;;
    Настройка возможности скрытия содержимого таблицы: флаг установлен - содержимое может быть скрыто кнопкой сворачивания; флаг не установлен - содержимое не может быть скрыто.
  Сохранять номер последовательности;;
    Поле для сохранения порядка вывода строк таблицы. Должно быть указано, если требуется иметь возможность изменять прядок строк перетаскиванием. Требуемый тип поля: целое.
  Способ редактирования строк;;
    Определяет способ редактирования значения в строках таблицы:
    +
    * Встроенный – редактирование значения осуществляется в строке самой таблицы;
    * Разметка – редактирование значения осуществляется в отдельном окне со своей разметкой. Разметка настраивается отдельно.
    +
    Данная настройка доступна только в разметках секций карточек для режима просмотра.
  Стандартный css класс;;
    Название CSS класса, в котором определен стандартный стиль элемента управления.
  Ширина в процентах;;
    Ширина элемента управления в процентах (указывается целое число) от ширины родительского элемента управления.
    +
    [.dfn .term]_Адаптивный_.
События::
  Перед разворачиванием;;
    Вызывается при нажатии кнопки разворачивания таблицы.
  Перед сворачиванием;;
    Вызывается при нажатии кнопки сворачивания таблицы.
  После разворачивания;;
    Вызывается после разворачивания таблицы.
  После сворачивания;;
    Вызывается после сворачивания таблицы.
  При удалении строки;;
    Вызывается перед удалением строки таблицы.
  После добавления строки;;
    Вызывается после того, как строка таблицы была добавлена.
  После удаления строки;;
    Вызывается после того, как строка таблицы была удалена.
  При добавлении строки;;
    Вызывается перед добавление строки таблицы.
  При наведении курсора;;
    Вызывается при входе курсора мыши в область элемента управления.
  При отведении курсора;;
    Вызывается, когда курсор мыши покидает область элемента управления.
  При получении фокуса;;
    Вызывается, когда элемент управления выбирается.
  При щелчке;;
    Вызывается при щелчке мыши по любой области элемента управления.

*На уровень выше:* xref:../topics/TableControls.html[Таблица]
