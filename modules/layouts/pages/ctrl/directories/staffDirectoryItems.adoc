= Записи справочника сотрудников

Элемент управления `_Записи справочника сотрудников_` предназначен для выбора записей из _Справочника сотрудников_. В зависимости от настроек пользователь может выбирать сотрудников, организации, подразделения, группы, роли и должности, а также поисковые слова.

include::partial$properties.adoc[tags=dependsOn]

* *_Редактирование_*. В данном режиме ЭУ предоставляет возможность добавлять и удалять записи.
+
.Элемент управления "Сотрудники" в режиме редактирования
image::staffDirectoryItemsEditMode.png[Элемент управления "Сотрудники" в режиме редактирования]
+
Пользователь может выполнять быстрый поиск и выбирать записи из справочника.
+
.Окно выбора записей из Справочника сотрудников с выбранными значениями
image::staffDirectoryItemsStaff.png[Окно выбора записей из Справочника сотрудников с выбранными значениями]
+
* *_Без редактирования_*. В данном режиме в ЭУ отображается список выбранных записей из связанной секции карточки.
+
.Элемент управления "Сотрудники" в режиме "Без редактирования"
image::staffDirectoryItemsViewMode.png[Элемент управления "Сотрудники" в режиме редактирования]
* *_По месту_*. При открытии карточки в ЭУ отображается список выбранных записей из связанной секции карточки. Изменение списка осуществляется в отдельном окне, открываемом при нажатии на текущее значение.

== Свойства

include::partial$properties.adoc[tags=general]

=== Внешний вид

==== Заполнитель

Текст, отображаемый в элементе управления, когда значение не выбрано.

`*Локализуемый*`

include::partial$properties.adoc[tags=displayLabelWithoutDefinition]

include::partial$properties.adoc[tags=hint]

include::partial$properties.adoc[tags=labelText]

==== Формат отображения подсказки к сотрудникам

Формат отображения данных о сотруднике, отображаемых во всплывающей подсказке к записи Сотрудник. Возможные варианты:

* *_ФИО_*.
* *_ФИО+Должность_*.
* *_Не используется_*. Во всплывающей подсказке отображается текст из поля Подсказка.

=== Формат отображения сотрудников

Формат отображения данных о сотруднике, отображаемых в записях Сотрудник. Возможные варианты:

* *_Фамилия И.О._*.
* *_Строка отображения_* (формат установленный в Справочнике сотрудников).

=== Данные

==== Источник данных

Коллекционная или структурная секция карточки или связанной карточки, содержащая данные для элемента управления.

Чтобы выбрать источник данных нажмите кнопку image:buttons/bt_dots.png[Три точки]. Будет открыто окно:

.Выбор источника данных для элемента управления
image::staffDirectoryItemsConf.png[Выбор источника данных для элемента управления]

Настройки источника содержат следующие элементы:

"Секция":: Выбор секции с полями со значениями элемента управления. Если к разметке подключены дополнительные источники данных, для выбора будут доступны секции карточки и дополнительных источников.

Столбец "Область выбора":: При установленном флаге разрешает выбирать записи из соответствующей области (из подразделений, из группы и т.д.).

"Сотрудник", "Подразделение", "Группа", "Роль", "Должность", "Поисковое слово":::
Поля для выбора поля карточки со значением записи соответствующего типа. Если поле не указано, возможность выбора значений данного типа будет недоступна.

Столбец "Доступность выбор значений соответствующего типа":: При установленном флаге разрешает выбирать записи соответствующего типа (сотрудников, подразделения и т.д.).

"Только из"::: Если значение задано, ограничивается возможность выбора записей: пользователи смогут выбирать записи только из указанного элемента и его дочерних элементов.

.Образец настройки
====
Например, чтобы разрешить выбирать только сотрудников из подразделений или организаций, но не разрешать выбирать сами подразделения, должны быть установлены два флага:

. Доступность выбора значений соответствующего типа в строке _Сотрудник_.
+
NOTE: Также должно быть выбрано поле карточки, содержащее значение типа _Сотрудник_.
+
. *Область выбора* в строке _Подразделение_.

Чтобы разрешить выбирать только подразделения (другие типы записей, в т.ч. сотрудники будут недоступны для выбора), должны быть установлены два флажка:

. *Область выбора* в строке "Подразделение".
. *Доступность выбор значений соответствующего типа* в строке "Подразделение". Также должно быть выбрано поле карточки, содержащее значение типа "Подразделение".
====

include::partial$properties.adoc[tags=editOperation]

include::partial$properties.adoc[tags=editOperationForVisibility]

=== Поведение

include::partial$properties.adoc[tags=visibility]

include::partial$properties.adoc[tags=addCss]

==== Задержка поиска (мс)

Интервал времени от ввода символа в строку поиска до выполнения быстрого поиска. По умолчанию 500 мс.

==== Использование последних

Определяет, требуется ли отображать последние выбранные записи. Последние выбранные записи отображаются при выборе элемента управления (только в режиме *_Редактирование_*), а также при нажатии клавиш kbd:[&#8595;] и kbd:[Пробел]. Отображается максимум десять записей.

При работе в карточках _Задание_ и _Группа заданий_ в списке отображаются последние исполнители, в других карточках -- последние выбранные записи.

==== Множественный выбор

При установленном флаге разрешается выбирать несколько записей из Справочника сотрудников. Если флаг снят, пользователи смогут выбирать только одно значение.

TIP: Свойство доступно только при работе с табличной секцией.

==== Обязательное

Определяет требование к заполнению значения ЭУ до сохранения карточки:

* Когда флаг установлен, значение ЭУ должно быть присвоено, иначе карточка не будет сохранена. При этом ЭУ помечается предупреждающим сообщением.
* Когда флаг не установлен, присваивать значение необязательно.

==== Отключен

Когда флаг установлен, отключается возможность изменить значения элемента управления. Работает совместно со свойством `*Операция редактирования*`. Редактирование будет запрещено, если одно из свойств запрещает редактирование.

`*Адаптивный*`

include::partial$properties.adoc[tags=byTab]

==== Режим редактирования

Определяет вариант отображения элемента управления и возможность изменения его значения:

* *_По месту_*. Значение изменяется в отдельном окне, которое открывается при нажатии на элемент управления.
+
Данный вариант подходит для разметки режима редактирования и разметки режима просмотра карточки.
* *_Редактирование_*. Значение изменяется непосредственно в элементе управления.
+
Данный вариант может быть выбран в разметке режима редактирования и просмотра.
+
Если элемент с режимом *_Редактирование_* добавлен в разметку просмотра, необходимо самостоятельно обеспечить сохранение его значения. Например, с использованием скриптов карточек.
* *_Без редактирования_*. Значение изменить нельзя.

==== Сотрудник по умолчанию

Определяет для элемента управления значение по умолчанию:

* *_Не задан_*. Значение по умолчанию не установлено,
* *_Текущий пользователь_*. По умолчанию будет выбран текущий сотрудник.
+
Возможность выбора сотрудника по умолчанию доступна, если в свойстве `*Источник данных`* включена возможность выбора сотрудников.

include::partial$properties.adoc[tags=stdCss]

=== События

==== Перед выбором значения

Вызывается перед выбором значения элемента управления.

include::partial$properties.adoc[tags=beforeSearchResultsLoaded]

include::partial$properties.adoc[tags=beforeEditWindowClosed]

include::partial$properties.adoc[tags=beforeDirectoryWindowClosed]

include::partial$properties.adoc[tags=beforeEditWindowOpened]

include::partial$properties.adoc[tags=beforeDirectoryWindowOpened]

==== Перед удалением значения

Вызывается перед удалением значения элемента управления.

==== После выбора значения

Вызывается после выбора значения из справочника.

include::partial$properties.adoc[tags=searchResultsLoaded]

include::partial$properties.adoc[tags=afterEditWindowClosed]

include::partial$properties.adoc[tags=afterDirectoryWindowClosed]

include::partial$properties.adoc[tags=afterCurrentFilterChanged]

include::partial$properties.adoc[tags=afterEditWindowOpened]

include::partial$properties.adoc[tags=directoryWindowOpened]

==== После удаления значения

Вызывается после удаления значения элемента управления.

include::partial$properties.adoc[tags=filterChange]

include::partial$properties.adoc[tags=mouseOver]

include::partial$properties.adoc[tags=mouseAway]

include::partial$properties.adoc[tags=focusGet]

include::partial$properties.adoc[tags=focusLoose]

include::partial$properties.adoc[tags=dataChanged]

include::partial$properties.adoc[tags=onClick]
