= Задания

Элемент управления _Задания_ предназначен для создания и отображения связанных заданий и групп заданий карточки.

.Пример элемента управления "Задания" со списком связанных заданий карточки
image::task.png[Пример элемента управления "Задания" со списком связанных заданий карточки]

В списке заданий отображаются только задания и группы заданий непосредственно связанные с карточкой. Задания большей глубины вложенности не отображаются.

TIP: Данный ЭУ может быть добавлен только в разметку, предназначенную для просмотра карточек.

include::partial$restartRequired2.adoc[]

== Свойства

include::partial$properties.adoc[tags=general]

=== Внешний вид

==== Дайджест представления

Определяет формат отображения списка заданий карточки.

* Когда флаг установлен, отображаются названия заданий и значки состояний.
* Когда флаг не установлен, отображается название задания, ФИО исполнителя, срок окончания и состояние задания или группы заданий

.Список заданий в режиме "Дайджест"
image::taskSampleDigest.png[Список заданий в режиме "Дайджест"]

==== Заголовок

Текст, который будет отображаться над блоком элемента управления. Заголовок выделяется жирным шрифтом.

`*Локализуемый*`

=== Данные

include::partial$properties.adoc[tags=extendedDataSource]

include::partial$properties.adoc[tags=dataSource]

==== Поле данных

Поле карточки, содержащее ссылку на карточку _Список ссылок на карточки заданий_.

==== Виды заданий для отображения

Выбор видов отображаемых в списке заданий. Если значение не указано, то в списке отображаются связанные задания всех видов.

==== Виды заданий для создания

Выбор видов заданий, которые могут быть созданы из карточки.

Для каждого вида может быть указано собственное отображаемое название.

.Форма для выбора видов карточек
image::taskKinds.png[Форма для выбора видов карточек]

Флаг `*К согласованию*` включает возможность создания в согласовании подчиненного задания согласования. Чтобы функция работала, в настройках этапа согласования должна быть включена настройка _Разрешить создание подчиненных заданий_.

При установленном флаге, в список видов карточек добавляется вид _Подчиненные к согласованию_.

.Форма для выбора видов карточек с установленным флагом К согласованию
image::taskShildApprov.png[Форма для выбора видов карточек с установленным флагом К согласованию]

Флаг `*Использовать настройки Задания*` включает режим, при котором список доступных для создания видов карточек будет получен из _Справочника видов карточек_. Данный режим предназначен для настройки разметок карточки _Задание_.

Если флаг установлен, виды подчиненных заданий и групп заданий будут получены из свойств `*Виды подчиненного задания*` и `*Виды подчиненной группы заданий*`.

.При этом действуют следующие правила:
* Создание подчиненных заданий недоступно, если в _Справочнике видов карточек_ используется режим *_Выбор из ограниченного списка_*, но виды в списке не выбраны.
* Если в настройках вида задания разрешается создавать подчиненные задания единственного вида, то при создании будет выбран этот вид. Диалоговое окно выбора вида не будет показано.
* При создании подчиненных заданий учитываются настройки переноса значений полей и ссылок из родительского задания.
+
NOTE: Когда флаг `*Использовать настройки Задания*` установлен, возможность добавления видов карточек блокируется.

==== Операция редактирования

Выбор операции редактирования для добавления связанных заданий. Если значение не задано, добавление будет доступно всем (в случае, если добавление разрешено).
+
Если значение `*Операции редактирования*` наследуется от родительского Блока, название свойства меняется на `*Операция редактирования (наследовано)*`.

include::partial$properties.adoc[tags=editOperationForVisibility]

==== Создание групп заданий

Определяет возможность создания новой группы заданий из элемента управления. Создание групп заданий разрешено, если флаг установлен.

==== Создание заданий

Определяет возможность создавать новое задание из элемента управления. Создание заданий разрешено, если флаг установлен.

=== Поведение

include::partial$properties.adoc[tags=visibility]

include::partial$properties.adoc[tags=addCss]

include::partial$properties.adoc[tags=disabled]

==== Загружать синхронно (шт)

Определяет максимальное количество элементов списка, при котором должна использоваться синхронная загрузка данных. Если количество элементов больше указанного, все данные будут загружаться асинхронно.

include::partial$properties.adoc[tags=byTab]

include::partial$properties.adoc[tags=openMode]

==== Режим отображения

Определяет вариант отображения элемента управления в карточке:

* *_Список и создание_* -- в ЭУ отображаются задания и кнопка создания нового задания или группы заданий. Задания отображаются в формате, определенном свойством *_Дайджест представления_*.
* *_Только создание_* -- в ЭУ отображается кнопка создания нового задания или группы заданий;
* *_Родитель_* -- в элементе управления отображается ссылка на родительское задание. Для работы ЭУ в данном режиме в свойстве `*Поле данных*` должно быть указано поле карточки, содержащее ссылку на родительское задание.

include::partial$properties.adoc[tags=stdCss]

=== События

include::partial$properties.adoc[tags=beforeExpand]

include::partial$properties.adoc[tags=beforeCollapse]

==== Перед созданием задания

Вызывается перед созданием задания.

==== После загрузки заданий

Вызывается после загрузки заданий.

include::partial$properties.adoc[tags=mouseOver]

include::partial$properties.adoc[tags=mouseAway]

include::partial$properties.adoc[tags=onExpand]

include::partial$properties.adoc[tags=onCollapse]

include::partial$properties.adoc[tags=onClick]
