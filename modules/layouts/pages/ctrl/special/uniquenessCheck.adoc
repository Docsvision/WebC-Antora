= Проверка на уникальность

Элемент управления `_Проверка на уникальность_` добавляет в карточку Документ функцию проверки уникальности атрибутов, критерии которой настроены в Справочнике видов карточек.

Проверка выполняется при изменении значения поля, сохранении карточки, а также при выполнении операций с ней. Неуникальные атрибуты карточки будут выделены цветом.

.Выделение неуникальных атрибутов в карточке
image::ct_uniquenessCheckLed.png[Выделение неуникальных атрибутов в карточке]

Также элемент управления добавляет в карточки значок image:ct_uniquenessCheckIco.png[Восклицательный знак], указывающий на неуникальность карточки. При щелчке по значку будет открыто окно со списком нарушений, содержащем ссылку на карточку, с которой возник конфликт, а также список полей, нарушающих уникальность. В список полей также включаются неотображаемые в разметке поля, если уникальность нарушена в них.

.Результат проверки уникальности
image::ct_uniquenessCheckResult.png[Результат проверки уникальности]

[#blockIfNotUnique]
Элемент управления может блокировать сохранение и/или изменение состояния карточки. Блокировка настраивается свойствами `*Блокировать при смене состояния*` и `*Блокировать при сохранении*`. В данном случае при сохранении или выполнении операции будет также показано окно со списком нарушений.

Элемент управления `_Проверка на уникальность_` предназначен для использования только в разметке карточки _Документ_.

[IMPORTANT]
====
Из-за особенности способа хранения данных проверка уникальности может не работать для значения элемента управления xref:ctrl/standard/textArea.adoc[Текст] в режиме HTML редактора.
====

== Свойства

include::partial$properties.adoc[tags=general]

=== Данные

==== Блокировать при смене состояния

Устанавливает список состояний, переход в которые должен блокироваться, если карточка не является уникальной.

Настройка списка осуществляется в диалоговом окне, открывающимся по нажатию `…`.

.Диалоговое окно выбора состояний для блокировки
image::ct_uniquenessCheck_config.png[Диалоговое окно выбора состояний для блокировки]

По умолчанию переходы в другие состояния не блокируются.

Настройка влияет только на изменение состояния карточки пользователем.

==== Блокировать при сохранении

Включает или выключает блокировку сохранения карточки, если карточка не является уникальной. По умолчанию блокировка включена.

=== Поведение

==== Css класс нарушения проверки уникальности

Название CSS класса со стилем, применяемым к атрибутам карточки, нарушающим уникальность. По умолчанию используется стиль *uniqueness-check-failed*, который может быть изменён на пользовательский.

include::partial$properties.adoc[tags=addCss]

include::partial$properties.adoc[tags=stdCss]

=== События

include::partial$properties.adoc[tags=mouseOver]

include::partial$properties.adoc[tags=mouseAway]

include::partial$properties.adoc[tags=onClick]
