= Предпросмотр файла

Элемент управления `_Предпросмотр файла_` предназначен для отображения содержимого файла, выбранного в элементе xref:ctrl/special/fileList.adoc[Список файлов], xref:ctrl/special/taskCardFilePanel.adoc[Файловая панель], xref:ctrl/approval/approvalFilePanel.adoc[Файловая панель согласования].

.Пример элемента управления "Предпросмотр файла" в разметке карточки
image::controls_filepreview_sample.png[Пример элемента управления "Предпросмотр файла" в разметке карточки]

Данный элемент управления позволяет:

* Отображать содержимое файла непосредственно в разметке просмотра и редактирования карточки.
* Отображать содержимое файла при загрузке карточки без необходимости выбора файла.
* Переключаться между отображаемыми файлами.
* Работать с несколькими элементами `_Список файлов_`: если в разметке несколько данных элементов, ЭУ `_Предпросмотр файла_` будет показывать содержимое активного элемента `_Список файлов_`.

.Важные особенности использования элемента "Предпросмотр файла"
****
* В разметку можно добавить только один элемент `_Предпросмотр файла_`.
* Элемент управления `_Предпросмотр файла_` должен быть добавлен в отдельный элемент xref:Control_block.adoc[Блок], в котором не должно быть других элементов кроме элемента `_Предпросмотр файла_`.
* Родительский блок элемента `_Предпросмотр файла_` должен размещаться в блоке, содержащем только два дочерних элемента (см. рисунок ниже): блок с элементом `_Предпросмотр файла_` и блок с остальными элементами разметки.
+
.Пример структуры разметки, соответствующей требованиям
image::filePreviewRecommendation.png[Пример структуры разметки, соответствующей требованиям]
****

.Типы файлов, для которых поддерживается предварительный просмотр:
* `.pdf`.
* Офисные: `.docx`, `.odt`, `.doc`, `.rtf`, `.dot`, `.dotx`, `.xlt`, `.xls`, `.xltx`, `.xlsx`, `.ods`;
* изображения: `.jpg`, `.jpeg`, `.gif`, `.png`, `.bmp`, `.tiff`, `.tif`, `.emf`, `.wmf`;
* Прочие: `.htm`, `.adoc`, `.js`, `.xslt`, `.xsl`, `.xml`, `.asmx`, `.ascx`, `.aspx`, `.cpp`, `.h`, `.css`, `.idl`, `.ini`, `.java`, `.rc`, `.rc2`, `.shtm`, `.shtml`, `.txt`, `.log`, `.cs`, `.sql`, `.csv`.

[NOTE]
====
Особенности реализации: файлы с поддержкой предпросмотра транслируются в формат PDF на сервере {wc}, и отображаются на клиенте с использованием компонента https://mozilla.github.io/pdf.js/getting_started/[PDF.JS], который предоставляет пользователям следующие функции:

* Переход между страницами.
* Выбор масштаба.
* Поиск по содержимому (только для текстовых документов).
* Печать и др.

См. информацию по компоненту PDF.JS в сети Интернет.
====

TIP: Данный элемент управления может быть добавлен в разметки создания, просмотра и редактирования карточек _Документ_, а также *просмотра* и *редактирования* карточек _Задание_ и _Группа заданий_.

IMPORTANT: Работа элемента управления в разметке создания карточек _Задание_ и _Группа заданий_ НЕ поддерживается.

== Свойства

=== Общие

==== Название ЭУ

Название типа элемента управления.

==== Название

Уникальное название элемента управления.

=== Поведение

==== Видимость

Настройка видимости. Элемент управления отображается в карточке, когда флаг установлен. Элемент управления и любое его содержимое не отображаются, когда флаг снят.

`*Адаптивный*`

==== Высота (в пикселях)

Устанавливает высоту элемента `_Препросмотр файла_` в пикселях.

==== Дополнительные css классы

Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.

==== Комментарии

Включает или выключает возможность комментирования файла.

==== Переходить по TAB

Флаг определяет последовательность перехода по ЭУ карточки при нажатии кнопки kbd:[TAB]. Если флаг установлен, переход по kbd:[TAB] разрешён.

==== Раскрывать файл

Включает или выключает режим отображения содержимого файла при загрузке разметки. При выключенном свойстве содержимое файла отображается только после его выбора.

Если элемент `_Список файлов_` содержит несколько файлов, при включенном свойстве `_Раскрывать файл_` будет отображаться первый файл по списку.

==== Стандартный css класс

Название CSS класса, в котором определен стандартный стиль элемента управления.

==== Ширина по умолчанию (в процентах)

Ширина элемента в процентах относительно родительского элемента.

=== События

==== Перед открытием/сокрытием блока комментариев

Вызывается перед открытием и закрытием блока комментариев.

==== Перед открытием/сокрытием окна

Вызывается перед закрытием окна предпросмотра.

==== Перед скачиванием файла

Вызывается при нажатии кнопки загрузки файла на компьютер.

==== Перед сменой файла

Вызывается перед сменой отображаемого файла.

==== После открытия/сокрытия блока комментариев

Вызывается после открытия и закрытия блока комментариев.

==== После открытия/сокрытия окна

Вызывается после закрытия окна предпросмотра.

==== После скачивания файла

Вызывается после нажатия кнопки загрузки файла на компьютер.

==== После смены файла

Вызывается после смены отображаемого файла.

==== При наведении курсора

Вызывается при входе курсора мыши в область элемента управления.

==== При отведении курсора

Вызывается, когда курсор мыши покидает область элемента управления.

==== При щелчке

Вызывается при щелчке мыши по любой области элемента управления.
