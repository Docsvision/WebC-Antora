= Html виджет

Элемент управления `_Html виджет_` предназначен для отображения HTML-страницы с заданным адресом.

.Элемент управления "Html виджет" с содержимым HTML-страницы в разметке исходящего документа
image::html-view.png[Элемент управления "Html виджет" с содержимым HTML-страницы в разметке исходящего документа]

`_Html виджет_` может загружать HTML-страницу из указанного файла или ресурса. Дла загрузки HTML-страницы нужно указать значение свойства `*Режим`*. URL адрес можно указать непосредственно в настройках ЭУ или получить из данных карточки.

== Свойства

include::partial$properties.adoc[tags=general]

=== Внешний вид

include::partial$properties.adoc[tags=hint]

=== Данные

include::partial$properties.adoc[tags=extendedDataSource]

include::partial$properties.adoc[tags=dataSource]

==== Поле данных

Текстовое поле карточки, содержащее код отображаемой HTML-страницы.

Свойства `*Поле данных*ё и `*Источник данных*` доступны, когда в настройке Режим выбрано значение `*Из карточки`*.

==== URL

Адрес HTML-страницы, который зависит от выбранного режима ЭУ (настройка `Режим`):

* В режиме *_Из файла_* следует указывать относительный путь к файлу HTML-страницы в каталоге установки модуля {wc}, например: `Content\Extensions\HtmlPages\manual.html`.
+
WARNING: Файл HTML-страницы следует размещать только в подкаталоге `Site/Content/Extensions` или `Site/Content/Solutions` каталога установки {wc}а.
* В режиме *_Внешний ресурс_* следует указывать URL-адрес HTML-страницы, например: `http://web.domain.com/htmlpages/manual.html`.
+
WARNING: Внешний ресурс, с которого загружается HTML-страница, должен разрешать встраивание страниц в IFRAME (не отправлять заголовок `X-FRAME-OPTIONS` в ответе).
+
Настройка "URL" отображается, когда выбран режим *_Из файла_* или *_Внешний ресурс_*.

=== Поведение

==== Sandbox фрейма

Значение атрибута `*sandbox*`, добавляемого к тегу `IFRAME`. Должен быть установлен флаг `*Использовать sandbox фрейма*`.
+
NOTE: Свойство `*Sandbox фрейма*` отображается, когда выбран режим `*Внешний ресурс*`.

include::partial$properties.adoc[tags=visibility]

include::partial$properties.adoc[tags=addCss]

==== Обезопасить HTML

Флаг, указывающий на необходимость очистки HTML-кода внедряемой страницы от потенциально небезопасных элементов, через которые возможна XSS-атака (в частности, скрипты).

include::partial$properties.adoc[tags=editOperationForVisibility]

==== Использовать sandbox фрейма

Флаг, указывающий на необходимость добавления к тегу `IFRAME` атрибута `*sandbox*` (см. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe[developer.mozilla.org]) со значением из свойства `*Sandbox фрейма*`.
+
NOTE: Свойство `*Использовать sandbox фрейма*` отображается, когда выбран режим *_Внешний ресурс_*.

==== Прокрутка фрейма

Режим показа полос прокрутки для содержимого, отображаемого во фрейме:

[horizontal]
*_auto_*:: Необходимость отображения полос прокрутки определяется автоматически.
*_yes_*:: Полосы прокрутки отображаются всегда.
*_no_*:: Полосы прокрутки всегда скрыты.

NOTE: Свойство `*Прокрутка фрейма*` отображается, когда выбран режим *_Внешний ресурс_*.

=== Режим

Определяет способ получения данных для отображения в виджете:

* *_Из карточки_*. Должна отображаться HTML-страница, код которой хранится в поле карточки, указанном в настройке `Поле данных`.
* *_Из файла_*. Должна отображаться HTML-страница из файла, путь к которому указан в настройке `URL`.
* *_Внешний ресурс_*. Должна отображаться HTML-страница, адрес которой указан в настройке `URL`.
+
В режиме *_Внешний ресурс_* HTML-страницы будут открываться во фрейме. В режимах *_Из файла_* и *_Из карточки_* HTML-страницы будут встраиваться в HTML-код страницы {wc}а. Особенности размещения страницы во фрейме и встраивании в HTML-код приведены в конце раздела.

include::partial$properties.adoc[tags=stdCss]

=== Размеры

==== Высота

Высота фрейма.

==== Ширина

Ширина фрейма.
+
Значения высоты и ширины фрейма указываются с единицей измерения (например, `100px`).
+
NOTE: Свойства `*Высота*` и `*Ширина*` отображаются, когда выбран режим `*Внешний ресурс*`.

=== События

include::partial$properties.adoc[tags=mouseOver]

include::partial$properties.adoc[tags=mouseAway]

include::partial$properties.adoc[tags=onClick]

== Отличительные особенности внедрения HTML-страницы от открытия страницы во фрейме

Если для отображения HTML-страницы используется фрейм (выбран режим *_Внешний ресурс_*), страница отображается в отдельном окне браузера, размещенном внутри страницы {wc}а, при этом:

* Стили, используемые {wc}ом, не распространяются на содержимое фрейма.
* HTML-страница загружается асинхронно с загрузкой страницы {wc}а.

Если HTML-страница внедряется (без использования фрейма), HTML-код страницы добавляется к HTML-коду страницы {wc}а без преобразований, при этом:

* В коде внедряемой страницы не должно быть тегов `head`, `body` и `style`.
* Внедряемый код должен быть безопасным, т.к. данный код вставляется без изменений -- иначе используйте фрейм, с установленным флагом `*Использовать sandbox фрейма*`.

== Особенности использования изображений и стилей

Если для отображения HTML-страницы используется фрейм (режим `*Внешний ресурс*`):

* Путь к ресурсам (изображение, скрипт) указывается относительно файла HTML-страницы, например:
+
[source,html]
----
<img src="images/pic.jpg" />
----
* Cтиль подключается стандартным образом -- в теге `body`.

Если для отображения HTML-страницы используется внедрение:

* Путь к ресурсам указывается относительно корня сайта, например:
+
[source,html]
----
<img src="Content\Extensions\HtmlPages\imgages\pic.jpg" />
----
* CSS файл со стилями размещается в папке `Site\Content\Solutions\<Название решения>\Styles` или `Site\Content\Extensions\<Название расширения>\Styles` каталога установки {wc}а.
