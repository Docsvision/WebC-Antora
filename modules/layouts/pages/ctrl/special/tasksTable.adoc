= Таблица исполнения

Элемент управления `_Таблица исполнения_` предназначен для отображения дерева заданий в виде списка.

.Элемент управления "Таблица исполнения" в карточке документа
image::ct_tasktable_sample.png[Элемент управления "Таблица исполнения" в карточке документа]

ЭУ поддерживает два варианта отображения:

. В карточке отображается кнопка, при нажатии которой будет открыто окно просмотра таблицы исполнения.
. В карточке сразу отображается таблица исполнения.

Элемент управления предоставляет функции:

* Фильтрация списка по текущему статусу задания, и поиск заданий по исполнителю.
* Переход к заданию/группе заданий из списка по нажатию на ссылку с названием задания/ГЗ.
* Просмотр информации по отдельному заданию/группе заданий по нажатию на иконку задания/ГЗ.
* Удаление задания/группы заданий из окна просмотра информации по заданию при наличии прав.

== Свойства

=== Общие

==== Название ЭУ

Название типа элемента управления.

==== Название

Уникальное название элемента управления.

=== Внешний вид

==== Показывать развернутым

Определяет уровень узлов дерева заданий, отображаемых по умолчанию:

include::partial$controlTable.adoc[]
|`*0*` |Показывать все узлы (значение по умолчанию).
|`*1*` |Показывать только узлы первого уровня (вложенности);
|`*2*` |Показывать узлы первого и второго уровня;
|`*3*` |Показывать узлы первого, второго и третьего уровня, и т. д.
|===

==== Режим отображения

Определяет вариант отображения ЭУ в карточке:

* *_Кнопка_*. В карточку добавляется кнопка для открытия модального окна со списком исполнения.
* *_Разметка_*. В карточку добавляется непосредственно список исполнения.

==== Текст кнопки

Текст кнопки открытия таблицы исполнения. Используется в режиме отображения *_Кнопка_*.

=== Данные

==== Расширенный источник данных

Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.

==== Источник данных

Секция карточки, содержащая данные элемента управления.

==== Поле данных

Поле карточки, содержащее ссылку на карточку _Список ссылок на карточки заданий_.

==== Виды заданий для отображения

Выбор видов заданий, отображаемых в дереве исполнения. Если значение не указано, то в дереве исполнения отображаются задания и группы заданий всех видов.

=== Поведение

==== Видимость

Настройка видимости. Элемент управления отображается в карточке, когда флаг установлен. Элемент управления и любое его содержимое не отображаются, когда флаг снят.

`*Адаптивный*`

==== Видимые колонки таблицы

Список колонок с данными карточек, которые должны отображаться в таблице исполнения.

.Выбор отображаемых колонок таблицы исполнения
image::tasksTable_collumns.png[Выбор отображаемых колонок таблицы исполнения]

.Список колонок:
- _Имя_.
- _Автор_.
- _Состояние_.
- _Плановая дата завершения_.
- _Фактическая дата завершения_.
- _Назначенный исполнитель_.
- _Текущий исполнитель_.
- _Контролер_.
- _Ответственный исполнитель_.
- _Дата отправки_.
- _Описание_.
- _Вид_.
- _Комментарий / Отчет_.

[NOTE]
====
Текущий исполнитель не отображается, если задание не отправлено.

В колонке _Комментарий / Отчет_ будет выводиться отчёт к завершению задания или последний комментарий, если задание не завершено.
====

==== Дополнительные css классы

Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.

==== Минимальная ширина

Минимальная ширина таблицы.

`*Адаптивный*`

==== Операция редактирования для видимости

Определяет операцию, которая должна быть доступна, чтобы ЭУ отображался для пользователя. Работа свойства зависит от значения свойства `*Видимость*`:

* Когда флаг `*Видимость*` установлен и выбрана _операция редактирования для видимости_, видимость элемента определяется исходя из доступности пользователю выбранной операции редактирования.
* Когда флаг `*Видимость*` установлен, и _операция редактирования для видимости_ НЕ выбрана, ЭУ отображается всегда.
* Когда флаг `*Видимость*` НЕ установлен, ЭУ всегда скрыт.

==== Переходить по TAB

Флаг определяет последовательность перехода по ЭУ карточки при нажатии кнопки kbd:[TAB]. Если флаг установлен, переход по kbd:[TAB] разрешён.

==== Просмотр полного дерева

Выбор операции, которая должна быть доступна пользователю для возможности просмотра полного дерева заданий.

По умолчанию у пользователя в заданиях и группах заданий в таблице исполнения отображаются только текущее задание и его подчиненные задания. Чтобы просмотреть полное дерево исполнения (с родительскими заданиями) пользователю нужно нажать кнопку переключения режима, которая скрыта, если пользователю недоступна операция, указанная в данной настройке. Если операция не указана, то кнопка переключения режима отображения таблицы исполнения будет доступна всегда.

==== Режим открытия

Определяет способ открытия ссылки:

* *_Текущая вкладка_*. Ссылка будет открыта в текущей вкладке.
* *_Новая вкладка_*. Ссылка будет открыта в новой вкладке.
* *_Новое окно браузера_*. Ссылка будет открыта в новом окне веб-браузера.

==== Режим отображения группы из 1 задания

Определяет вариант отображения группы заданий, содержащей единственное задание в таблице исполнения:

* *_Отображать оба_*. Должна быть показаны группа заданий и её единственное задание.
* *_Группа_*. Должна отображаться только группа заданий.
* *_Задание_*. Должно отображаться только задание группы.

==== Стандартный css класс

Название CSS класса, в котором определен стандартный стиль элемента управления.

=== События

==== Перед удалением строки

Вызывается при использовании функции удаления задания/группы заданий.

==== После удаления строки

Вызывается после удаления задания/группы заданий.

==== При наведении курсора

Вызывается при входе курсора мыши в область элемента управления.

==== При отведении курсора

Вызывается, когда курсор мыши покидает область элемента управления.

==== При щелчке

Вызывается при щелчке мыши по любой области элемента управления.
