
== Строка конструктора справочников

Элемент управления *Строка конструктора справочников* предназначен для отображения и выбора строки из _Конструктора справочников_.

Вариант отображения ЭУ зависит от настройки `Режим редактирования`:

* Редактирование - ЭУ в данном режиме может быть использован в разметке режима чтения и редактирования карточки. В режиме `Редактирование` поддерживается быстрый поиск и выбор записи из _Конструктора справочников_.
+
image::ct_baseuniversal_editmode.png[Элемент управления "Строка конструктора справочников" в режиме редактирования]
+
Быстрый поиск осуществляется по названию записи, а в режиме выбора из справочника - по названию и описанию.
* По месту - ЭУ в данном режиме может быть использован в разметке режима чтения и редактирования карточки. Выбор и изменение записи осуществляется при нажатии на ссылку в ЭУ. Поиск и выбор осуществляется аналогично поиску и выбору для режима Редактирование.
+
image::ct_baseuniversal_showmode.png[Элемент управления "Строка конструктора справочников" в режиме редактирования по месту]
* Без редактирования - ЭУ в данном режиме отображает название записи из связанного поля карточки.

ЭУ может быть настроен для ограничения области выбора:

* возможность ограничить выбор записи только из определенного узла Конструктора справочников
* функцию быстрого поиска для выбора организации или подразделения;
* возможность ограничить область выбора: только узел или узел и дочерние узлы.

== Свойства

Общие::
Название ЭУ:::
Название типа элемента управления.
Название:::
Уникальное название элемента управления.
Внешний вид::
Заполнитель:::
Текст, отображаемый в элементе управления, если строка справочника не выбрана.
+
`*Локализуемый*`
Использовать описание:::
Данное свойство влияет на отображение поля описание при открытии справочника.
+
Описания длиннее двух строк будут отображаться не полностью, а с многоточием в конце. Полный текст описания отображается во всплывающей подсказке при наведении курсора. При наведении курсора название и описание выделяются цветом и становятся доступными для выбора. Когда значение в строке выбрано, описание в ЭУ не показывается.
Отображать метку без значения:::
Определяет вариант отображения метки.
* Когда флаг установлен, текст метки отображается всегда.
* Когда флаг не установлен, текст метки отображается только, если задано значение ЭУ.
Подсказка:::
Содержимое всплывающей подсказки.
+
`*Локализуемый*`.
Текст метки:::
Содержимое метки, отображаемой слева от элемента управления.
+
`*Локализуемый*`
Данные::
Расширенный источник данных:::
Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
Источник данных:::
Секция карточки, содержащая данные элемента управления.
Поле данных:::
Поле карточки, содержащее ссылку на организацию _Конструктора справочников_.
Операция редактирования:::
Выбор операции редактирования значения элемента управления. Если операция недоступна пользователю, то изменение значения элемента управления также недоступно. Если операция не выбрана, то возможность редактирования значения элемента управления не проверяется.
+
Если значение `*Операции редактирования*` наследуется от родительского Блока, название свойства меняется на `*Операция редактирования (наследовано)*`.
Поведение::
Видимость:::
Настройка видимости. Элемент управления отображается в карточке, когда флаг установлен и не отображается вместе с содержимым, когда флаг снят.
+
`*Адаптивный*`
Дополнительные css классы:::
Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
Задержка поиска (мс):::
Определяет время задержки (в мс) от ввода последнего символа в строку поиска до выполнения быстрого поиска по справочнику.
Значение по умолчанию:::
Строка _Конструктора справочников_, выбранная по умолчанию.
Область выбора:::
Устанавливает ограничение возможности выбора пользователем строк из узла _Конструктора справочников_:
+
* Только выбранный узел -- пользователю будут доступны для выбора только строки выбранного узла.
* Только дочерние узлы к выбранному -- пользователю будут доступны для выбора строки только из подчиненных узлов выбранного узла.
* Выбранный и дочерние к нему -- пользователю будут доступны для выбора строки выбранного узла и его подчиненных узлов.
+
Данная настройка отображается, когда узел выбран -- свойство *Узел*.
Обязательное:::
Определяет требование к заполнению значения ЭУ до сохранения карточки:
* Когда флаг установлен, значение ЭУ должно быть присвоено, иначе карточка не будет сохранена. При этом ЭУ помечается предупреждающим сообщением.
* Когда флаг не установлен, присваивать значение необязательно.
Операция редактирования для видимости:::
Определяет операцию, которая должна быть доступна, чтобы ЭУ отображался для пользователя. Работа свойства зависит от значения свойства `*Видимость*`:
+
* Когда флаг `*Видимость*` установлен и выбрана _операция редактирования для видимости_, видимость элемента определяется исходя из доступности пользователю выбранной операции редактирования.
* Когда флаг `*Видимость*` установлен, и _операция редактирования для видимости_ НЕ выбрана, ЭУ отображается всегда.
* Когда флаг `*Видимость*` НЕ установлен, ЭУ всегда скрыт.
Отключен:::
Когда флаг установлен, отключается возможность изменить значения элемента управления. Работает совместно со свойством `*Операция редактирования*`:редактирование будет запрещено, если одно из свойств запрещает редактирование.
+
`*Адаптивный*`
Переходить по TAB:::
Флаг определяет последовательность перехода по ЭУ карточки при нажатии кнопки kbd:[TAB]. Если флаг установлен, переход по kbd:[TAB] разрешён.
Режим редактирования:::
Определяет вариант отображения элемента управления и возможность изменения его значения:
+
* *_По месту_* -- значение изменяется в отдельном окне, которое открывается нажатием на элемент управления. Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
* *_Редактирование_* -- значение изменяется непосредственно в элементе управления. Данный вариант может быть выбран в разметке режима редактирования и просмотра.
+
Если элемент с режимом *_Редактирование_* добавлен в разметку просмотра, необходимо самостоятельно обеспечить сохранение его значения. Например, используя скриптов карточек.
* *_Без редактирования_* -- значение изменить нельзя.
Стандартный css класс:::
Название CSS класса, в котором определен стандартный стиль элемента управления.
Узел:::
Определяет узел _Конструктора справочников_, из которого пользователь может выбирать строки. Если узел не выбран, то предоставляется возможность выбирать строку из всего справочника.
+
При работе, выбранный корневой узел не будет отображаться в дереве узлов справочника -- отображаются только его подчинённые узлы и строки.
События::
События:::
Перед закрытием окна редактирования::
      Вызывается перед закрытием окна редактирования в режиме редактирования *_По месту_*.
Перед закрытием окна справочника::
      Вызывается перед закрытием окна выбора значения из справочника.
Перед открытием окна редактирования::
      Вызывается перед открытием окна редактирования в режиме редактирования *_По месту_*.
Перед открытием окна справочника::
      Вызывается перед открытием окна выбора значения из справочника.
После закрытия окна редактирования::
      Вызывается после закрытия окна редактирования в режиме редактирования *_По месту_*.
После закрытия окна справочника::
      Вызывается после закрытия окна выбора значения из справочника.
После открытия окна редактирования::
      Вызывается после открытия окна редактирования в режиме редактирования *_По месту_*.
После открытия окна справочника::
      Вызывается после открытия окна выбора значения из справочника.
При наведении курсора::
      Вызывается при входе курсора мыши в область элемента управления.
При отведении курсора::
      Вызывается, когда курсор мыши покидает область элемента управления.
После смены данных::
      Вызывается после изменения содержимого элемента управления.
При щелчке::
      Вызывается при щелчке мыши по любой области элемента управления.
