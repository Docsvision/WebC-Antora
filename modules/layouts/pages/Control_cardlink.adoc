
== Ссылка на карточку

Элемент управления *Ссылка на карточку* предназначен для выбора и отображения ссылки на определённую карточку.

[NOTE]
====
[.note__title]#Важное замечание:# Обратите внимание, после изменения разметок данной группы, для отображений изменений потребуется перезапуск IIS.
====

image::ct_cardlink_editmode.png[Элемент управления "Ссылка на карточку" в режиме редактирования]

ЭУ позволяет:

* открывать и изменять ссылку;
* открывать файл карточки, на которую указывает ссылка;

Возможность добавления/удаления/изменения ссылки определяется доступностью данной операции по ролевой модели.

Выбор ссылки осуществляется в диалоговом окне, интерфейс по умолчанию которого представлен на следующем рисунке.

image::cardlink_selectCard.png[Выбор ссылки на карточку]

Название карточки в ссылке по умолчанию формируется с помощью расширения {wc}а. Если метод расширения для формирования не найден, в ссылке указывается дайджест карточки.

== Свойства

Общие::
Название ЭУ:::
Название типа элемента управления.
Название:::
Уникальное название элемента управления.
Внешний вид::
Отображать метку без значения:::
Определяет вариант отображения метки.
* Когда флаг установлен, текст метки отображается всегда.
* Когда флаг не установлен, текст метки отображается только, если задано значение ЭУ.
Подсказка:::
Содержимое всплывающей подсказки.
+
`*Локализуемый*`.
Текст метки:::
Содержимое метки, отображаемой слева от элемента управления.
+
`*Локализуемый*`

Данные::
Расширенный источник данных:::
Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
Источник данных:::
Секция карточки, содержащая данные элемента управления.
Поле данных:::
Поле карточки, имеющее тип `RefCardId`.
Операция редактирования:::
Выбор операции для редактирования значения ЭУ. Если операция недоступна пользователю, то изменение ссылки будет недоступно. Если операция не выбрана, то возможность изменения ссылки не проверяется.
+
Если значение `*Операции редактирования*` наследуется от родительского Блока, название настройки меняется на `*Операция редактирования (наследовано)*`.
Текст при отсутствии значения:::
Текст, отображаемый в ЭУ, когда ссылка не выбрана.
+
`*Локализуемый*`
Тип карточки для ссылки:::
Определяет типы карточек, ссылки на которые можно добавлять. Карточки других типов не отображаются при добавлении ссылки. Если значение не выбрано, для выбора будут доступны карточки всех типов.
Поведение::
Видимость:::
Настройка видимости. Элемент управления отображается в карточке, когда флаг установлен и не отображается вместе с содержимым, когда флаг снят.
+
`*Адаптивный*`
Дополнительные css классы:::
Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
Использовать список папок:::
Настройка списка папок, из которых пользователь сможет выбирать карточку для ссылки в режиме выбора "В текущей папке".
+
image::control_links_selectfolders.png[Список папок]
+
Если список папок пуст, не отмечено ни одной добавленной папки или переключатель "Все папки / Только выбранные папки" в положении "Все папки", пользователь сможет добавлять ссылки на карточки из любых доступных папок.
Обязательное:::
Определяет требование к заполнению значения ЭУ до сохранения карточки:
* Когда флаг установлен, значение ЭУ должно быть присвоено, иначе карточка не будет сохранена. При этом ЭУ помечается предупреждающим сообщением.
* Когда флаг не установлен, присваивать значение необязательно.
Операция редактирования для видимости:::
Определяет операцию, которая должна быть доступна, чтобы ЭУ отображался для пользователя. Действие настройки зависит от значения свойства _Видимость_:
+
* Когда флаг `*Видимость*` установлен и выбрана _операция редактирования для видимости_, видимость элемента определяется исходя из доступности пользователю выбранной операции редактирования.
* Когда флаг `*Видимость*` установлен, и _операция редактирования для видимости_ НЕ выбрана, ЭУ отображается всегда.
* Когда флаг `*Видимость*` НЕ установлен, ЭУ всегда скрыт.
Отключен:::
Когда флаг установлен, отключается возможность изменить значения элемента управления. Работает совместно со свойством `*Операция редактирования*`: если одно из свойств запрещает редактирования, редактирование будет запрещено.
+
`*Адаптивный*`
Переходить по TAB:::
Флаг определяет последовательность перехода по ЭУ карточки при нажатии кнопки kbd:[TAB]. Если флаг установлен, переход по kbd:[TAB] разрешён.
Поисковый запрос:::
Открывает окно выбора поискового запроса, который будет использоваться при поиске карточки для ссылки в режиме выбора "Везде".
+
image::control_links_selectquery.png[Выбор поискового запроса]
+
По умолчанию используется собственный поисковый запрос {wc}а: "Ссылки". Данный запрос позволяет искать карточки по дайджесту, автору, дате создания и изменения.
Режим редактирования:::
Определяет вариант отображения элемента управления и возможность изменения его значения:
+
* *_По месту_* -- значение изменяется в отдельном окне, которое открывается нажатием на элемент управления. Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
* *_Редактирование_* -- значение изменяется непосредственно в элементе управления. Данный вариант может быть выбран в разметке режима редактирования и просмотра.
+
Если элемент с режимом *_Редактирование_* добавлен в разметку просмотра, необходимо самостоятельно обеспечить сохранение его значения. Например, используя скриптов карточек.
* *_Без редактирования_* -- значение изменить нельзя.
Стандартный css класс:::
Название CSS класса, в котором определен стандартный стиль элемента управления.
События::
Перед закрытием окна:::
Вызывается перед закрытием окна выбора ссылки.
Перед открытием карточки:::
Вызывается при использовании команды открытия карточки по ссылке.
Перед открытием окна:::
Вызывается перед открытием окна выбора ссылки.
Перед открытием предпросмотра файла:::
Вызывается при использовании команды открытия окна предварительного просмотра файла карточки, на которую ведёт ссылка.
Перед удалением ссылки:::
Вызывается перед удалением ссылки.
После закрытия окна:::
Вызывается после закрытия окна выбора ссылки.
После открытия окна:::
Вызывается после открытия окна выбора ссылки.
После открытия предпросмотра файла:::
Вызывается после использования команды открытия окна предварительного просмотра файла карточки, на которую ведёт ссылка.
После смены данных:::
Вызывается после изменения содержимого элемента управления.
После удаления ссылки:::
Вызывается после удаления ссылки.
При наведении курсора:::
Вызывается при входе курсора мыши в область элемента управления.
При отведении курсора:::
Вызывается, когда курсор мыши покидает область элемента управления.
При получении фокуса:::
Вызывается, когда элемент управления выбирается.
При потере фокуса:::
Вызывается, когда выбор переходит к другому элементу управления.
При щелчке:::
Вызывается при щелчке мыши по любой области элемента управления.
