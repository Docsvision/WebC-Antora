
== Раскрывающийся список

Элемент управления [.ph .uicontrol]*Раскрывающийся список* предназначен для выбора и отображения значения из списка значений.

Элемент управления может быть связан с полем карточки следующих типов:

* int - предоставляется возможность самостоятельно создавать набор элементов, отображаемых в ЭУ;
* enum, bool - набор значений (для enum) будет загружен из схемы карточки и изменению не подлежит. При типе поля enum в ЭУ загружается весь список значений, при типе поля bool - два значения: True и False;
* refid – значения будут загружены из поля по ссылке.

Независимо от типа связанного поля, предоставляется возможность локализовать значения элементов списка.

Вариант отображения [.dfn .term]_ЭУ_ зависит от настройки `Режим     редактирования`:

* Редактирование - [.dfn .term]_ЭУ_ в данном режиме может быть использован только в разметке режима редактирования карточки.
+
image::cs_droplist_editmode.png[[.fig--title-label]##Рис. 1. ##Элемент управления «Раскрывающийся список» в режиме редактирования]
* По месту - [.dfn .term]_ЭУ_ в данном режиме может быть использован в разметке режима чтения и редактирования карточки. Изменение значения осуществляется при нажатии на ссылку в [.dfn .term]_ЭУ_.
+
image::cs_droplist_placemode.png[[.fig--title-label]##Рис. 2. ##Элемент управления «Раскрывающийся список» в режиме редактирования по месту]
* Без редактирования - [.dfn .term]_ЭУ_ в данном режиме отображает значение из связанного поля карточки.

[NOTE]
====
[.note__title]#Важное замечание:# Чтобы значение элемента управления, выбранное при создании или при редактировании карточки, корректно отображалось при её просмотре, наборы элементов в связанном списке в разметке режима редактирования/создания и в разметке режима просмотра должны совпадать. Создать ЭУ с идентичными настройками можно xref:dl_layout_copycontrol.adoc[копированием] исходного ЭУ из одной разметки в другую.
====

=== Свойства

Общие::
  Название ЭУ;;
    Название типа элемента управления.
  Название;;
    Уникальное название элемента управления.
Внешний вид::
  Заполнитель;;
    Текст, отображаемый в элементе управления, если для [.dfn .term]_ЭУ_ не задано значение.
    +
    [.dfn .term]_Локализуемый_.
  Отображать метку без значения;;
    Определяет вариант отображения метки: флаг установлен – текст метки отображается всегда; флаг не установлен – текст метки отображается только, когда задано значение [.dfn .term]_ЭУ_.
  Подсказка;;
    Содержимое всплывающей подсказки.
    +
    [#concept_qmc_v4h_hbb__d7e65 .dfn .term]#Локализуемый#.
  Текст метки;;
    Содержимое метки, отображаемой слева от элемента управления.
    +
    [.dfn .term]_Локализуемый_.
Данные::
  Расширенный источник данных;;
    Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
  Источник данных;;
    Секция карточки, содержащая данные элемента управления.
  Поле данных;;
    Поле карточки с данными элемента управления. Поле должно быть типа enum, bool или int.
  Операция редактирования;;
    Выбор операции редактирования значения элемента управления. Если операция недоступна пользователю, то изменение значения элемента управления также недоступно. Если операция не выбрана, то возможность редактирования значения элемента управления не проверяется.
    +
    Если значение [.dfn .term]_Операции редактирования_ наследуется от родительского Блока, название настройки меняется на «Операция редактирования (наследовано)».
  Список элементов;;
    Настройка списка элементов, отображаемых в элементе управления.
    +
    Список значений задается в форме, открываемой при нажатии кнопки image:buttons/bt_dots.png[Три точки]:

    image::cs_droplist_items.png[[.fig--title-label]##Рис. 3. ##Настройка списка элементов элемента управления "Раскрывающийся список", связанного с полем типа enum]
    +
    Возможность создания собственного набора значений доступна только для ЭУ, связанного с полем типа int. При сохранении карточки в связанное поле будет записано соответствующее целочисленное значение.
    +
    Локализация элементов списка выполняется при нажатии кнопки image:buttons/bt_dots.png[Три точки] в строке значения. Настройки локализации сохраняются после нажатия кнопки [.ph .uicontrol]*ОК* в окне [.keyword .wintitle]*Локализация элементов*.
  Элемент по умолчанию;;
    Элемент из набора значений ЭУ, который будет выбран по умолчанию в форме выбора значения.
Поведение::
  Видимость;;
    Настройка видимости: флаг установлен – элемент управления отображается в карточке; флаг не установлен – элемент управления (а также его содержимое) не отображается в карточке.
    +
    [.dfn .term]_Адаптивный_.
  Дополнительные css классы;;
    Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
  Обязательное;;
    Определяет требование к заполнению значения [.dfn .term]_ЭУ_ до сохранения карточки: флаг установлен – значение должно быть присвоено, иначе карточка не будет сохранена ([.dfn .term]_ЭУ_ помечается предупреждающим сообщением); флаг не установлен – присваивать значение не обязательно.
  Операция редактирования для видимости;;
    Определяет операцию, которая должна быть доступна пользователю для показа данного элемента управления. Действие настройки зависит от значения настройки [.dfn .term]_Видимость_:
    +
    * флаг [.dfn .term]_Видимость_ установлен, [.dfn .term]_операция редактирования для видимости_ выбрана – видимость элемента определяется доступностью пользователю выбранной операции редактирования;
    * флаг [.dfn .term]_Видимость_ установлен, [.dfn .term]_операция редактирования для видимости_ НЕ выбрана – ЭУ всегда отображается;
    * флаг [.dfn .term]_Видимость_ НЕ установлен – ЭУ всегда скрыт.
  Отключен;;
    При установленном флаге отключает возможность изменения значения элемента управления. Работает совместно со свойством «Операция редактирования»: если одно из свойств запрещает редактирования – редактирование будет запрещено.
    +
    [.dfn .term]_Адаптивный_.
  Переходить по TAB;;
    Определяет пользовательскую последовательность очередности обхода карточки по кнопке [.ph .uicontrol]*TAB*. Флаг установлен – переход по кнопке [.ph .uicontrol]*TAB* разрешен.
  Режим редактирования;;
    Определяет вариант отображения элемента управления и возможность изменения его значения:
    +
    * "По месту" – значение изменяется в отдельном окне, которое открывается при щелчке мыши по элементу управления. Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
    * "Редактирование" – значение изменяется непосредственно в элементе управления. Данный вариант может быть выбран в разметке режима редактирования и просмотра.
    +
    Если элемент с режимом "Редактирование" добавлен в разметку просмотра, необходимо самостоятельно обеспечить возможность сохранения его значения с использованием скриптов карточек.
    * "Без редактирования" – значение изменить нельзя.
  Стандартный css класс;;
    Название CSS класса, в котором определен стандартный стиль элемента управления.
События::
  Перед закрытием окна редактирования;;
    Вызывается перед закрытием окна редактирования в режиме редактирования "По месту".
  Перед открытием окна редактирования;;
    Вызывается перед открытием окна редактирования в режиме редактирования "По месту".
  Перед сворачиванием раскрывающегося списка;;
    Вызывается перед закрытием списка элементов при выборе значения.
  После закрытия окна редактирования;;
    Вызывается после закрытия окна редактирования в режиме редактирования "По месту".
  После открытия окна редактирования;;
    Вызывается после открытия окна редактирования в режиме редактирования "По месту".
  После открытия раскрывающегося списка;;
    Вызывается после открытия списка элементов при выборе значения.
  После сворачивания раскрывающегося списка;;
    Вызывается после закрытия списка элементов при выборе значения.
  При наведении курсора;;
    Вызывается при входе курсора мыши в область элемента управления.
  При отведении курсора;;
    Вызывается, когда курсор мыши покидает область элемента управления.
  При открытии раскрывающегося списка;;
    Вызывается перед открытием списка элементов при выборе значения.
  При получении фокуса;;
    Вызывается, когда элемент управления выбирается.
  При потере фокуса;;
    Вызывается, когда выбор переходит к другому элементу управления.
  После смены данных;;
    Вызывается после изменения содержимого элемента управления.
  При щелчке;;
    Вызывается при щелчке мыши по любой области элемента управления.

