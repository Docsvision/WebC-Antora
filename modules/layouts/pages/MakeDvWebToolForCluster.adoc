
== Настройка утилиты _DVWebTool_ для работы в кластере

Следующие действия необходимо выполнить, если {wc} работает в кластере и сервера {wc}а недоступны пользователям напрямую.

Инструкция выполняется после установки и настройки кластера {wc}, а также после обновления версии {wc}а на узлах кластера.

Все действия выполняются на одном из узлов кластера {wc}.

. Запустите программу [.ph .filepath]`C:\Program Files (x86)\{dv}\WebClient\5.5\Tools\mageui.exe` от имени администратора. Будет открыто окно [.ph .uicontrol]*Mage*.
+
image::mageui.png[[.fig--title-label]##Figure 1. ##Главное окно программы Microsoft .NET Framework Mage]
. Нажмите [.ph .menucascade]#[.ph .uicontrol]*File* > [.ph .uicontrol]*Open*# и выберите файл [.ph .filepath]`C:\Program Files (x86)\{dv}\WebClient\5.5\Site\Content\Tools\_DVWebTool_\{dv}._DVWebTool_.application`. Будут загружены данные из манифеста развертывания программы _DVWebTool_.
. Откройте раздел параметров [.ph .uicontrol]*Deployment Options*.
+
image::mageui_1.png[[.fig--title-label]##Figure 2. ##Deployment Options]
. В строке [.ph .uicontrol]*Start Location* измените адрес сервера {wc}, на адрес балансировщика нагрузки или иного промежуточного устройства. Например: [.ph .filepath]`http://dv1.company.com/{dv}WebClient/Content/Tools/_DVWebTool_/{dv}._DVWebTool_.application` на [.ph .filepath]`http://webclient.company.com/{dv}WebClient/Content/Tools/_DVWebTool_/{dv}._DVWebTool_.application`.
. Нажмите [.ph .menucascade]#[.ph .uicontrol]*File* > [.ph .uicontrol]*Save*#. Будет предложено подписать манифест.
. Выберите файл [.ph .filepath]`C:\Program Files (x86)\{dv}\WebClient\5.5\_DVWebTool_.pfx` и нажмите [.ph .uicontrol]*OK*.
. Закройте программу [.ph .uicontrol]*Mage*.
. Скопируйте папку [.ph .filepath]`C:\Program Files (x86)\{dv}\WebClient\5.5\Site\Content\Tools\_DVWebTool_\` на все узлы кластера.

=== Использование собственного сертификата для подписания _DVWebTool_

Файл [.ph .filepath]`_DVWebTool_.pfx` содержит сгенерированный {dv} сертификат. При необходимости для подписания можно использовать собственный сертификат с назначением «Code Signing» или «All». При этом потребуется подписать два манифеста.

. Запустите программу [.ph .filepath]`mageui.exe`.
. Откройте файл [.ph .filepath]`C:\Program Files (x86)\{dv}\WebClient\5.5\Site\Content\Tools\_DVWebTool_\Application Files\{dv}._DVWebTool_.exe.manifest`.
. Не вносите изменений в файл. Нажмите [.ph .menucascade]#[.ph .uicontrol]*File* > [.ph .uicontrol]*Save*#. При запросе сертификата выберите собственный сертификат для подписания.
. Откройте файл [.ph .filepath]`C:\Program Files (x86)\{dv}\WebClient\5.5\Site\Content\Tools\_DVWebTool_\{dv}._DVWebTool_.application`.
. Измените [.ph .uicontrol]*Start Location*, как указано выше.
. Откройте раздел параметров [.ph .uicontrol]*Application Reference*.
+
image::mageui_2.png[[.fig--title-label]##Figure 3. ##Application Reference]
. Нажмите кнопку [.ph .uicontrol]*Select Manifest* и выберите файл [.ph .filepath]`C:\Program Files (x86)\{dv}\WebClient\5.5\Site\Content\Tools\_DVWebTool_\Application Files\{dv}._DVWebTool_.exe.manifest`.
. Нажмите [.ph .menucascade]#[.ph .uicontrol]*File* > [.ph .uicontrol]*Save*#. При запросе сертификата выберите собственный сертификат для подписания.
. Закройте программу [.ph .uicontrol]*Mage*.
. Скопируйте папку [.ph .filepath]`C:\Program Files (x86)\{dv}\WebClient\5.5\Site\Content\Tools\_DVWebTool_\` на все узлы кластера.

*Parent topic:* xref:Cluster_create.adoc[Особенности настройки кластера {wc}]
