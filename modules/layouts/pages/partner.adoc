= Партнер

Элемент управления `_Партнер_` предназначен для выбора сотрудника из _Справочника контрагентов_ и изменения данных справочника.

.Справочник контрагентов
image::ct_partner_selector_sample.png[Справочник контрагентов]

Вариант отображения ЭУ зависит от свойства `*Режим                 редактирования*`:

* *_Редактирование_*. ЭУ в данном режиме поддерживает быстрый поиск и выбор из _Справочника контрагентов_.
+

Данный вариант может быть использован только в разметке режима редактирования карточки.
+
.Элемент управления "Партнер" в режиме редактирования
image::ct_partner_editmode.png[Элемент управления "Партнер" в режиме редактирования]
+
Быстрый поиск осуществляется по названию организации, подразделения контрагента и ФИО сотрудника контрагента, а в режиме выбора из справочника также возможен поиск организации по ИНН.
+
* *_По месту_*. Выбор и изменение выбранного сотрудника контрагента осуществляется при нажатии на ссылку в ЭУ. Поиск и выбор осуществляется аналогично поиску и выбору для режима *_Редактирование_*.
+
Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
+
.Элемент управления "Партнер" в режиме редактирования по месту
image::ct_partner_placemode.png[Элемент управления "Партнер" в режиме редактирования по месту]
* *_Без редактирования_*. ЭУ в данном режиме отображает по умолчанию ФИО сотрудника контрагента из связанного поля карточки.

include::partial$partnersDeleteSpecial.adoc[]

== Свойства

=== Общие

==== Название ЭУ

Название типа элемента управления.

==== Название

Уникальное название элемента управления.

=== Внешний вид

==== Заполнитель

Текст, отображаемый в элементе управления, если сотрудник не выбран.

`*Локализуемый*`

==== Операция редактирования для видимости

Определяет операцию, которая должна быть доступна, чтобы ЭУ отображался для пользователя. Работа свойства зависит от значения свойства `*Видимость*`:

* Когда флаг `*Видимость*` установлен и выбрана _операция редактирования для видимости_, видимость элемента определяется исходя из доступности пользователю выбранной операции редактирования.
* Когда флаг `*Видимость*` установлен, и _операция редактирования для видимости_ НЕ выбрана, ЭУ отображается всегда.
* Когда флаг `*Видимость*` НЕ установлен, ЭУ всегда скрыт.

==== Отображать метку без значения

Определяет вариант отображения метки.

* Когда флаг установлен, текст метки отображается всегда.
* Когда флаг не установлен, текст метки отображается только, если задано значение ЭУ.

==== Подсказка

Содержимое всплывающей подсказки.

`*Локализуемый*`

==== Подсказка к значению

Содержимое всплывающей подсказки, отображаемой если сотрудник выбран. Возможные варианты:

* *_ФИО_*.
* *_ФИО+Должность_*.
* *_Не используется_*. Во всплывающей подсказке отображается текст из поля `*Подсказка*`.

`*Локализуемый*`

==== Текст метки

Содержимое метки, отображаемой слева от элемента управления.

`*Локализуемый*`

==== Формат отображения

Определяет формат отображения данных сотрудника в ЭУ:

* *_Фамилия И.О._*.
* *_Строка отображения_*. Используется формат отображения, настроенный в _Справочнике контрагентов_.

=== Данные

==== Расширенный источник данных

Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.

==== Источник данных

Секция карточки, содержащая данные элемента управления.

==== Поле данных

Поле карточки, содержащее ссылку на сотрудника из _Справочника контрагентов_.

==== Выбирать из

Ограничивает возможность поиска/добавления сотрудников. Пользователь сможет искать и добавлять сотрудников только в выбранную организацию или в подчиненные организации и подразделения.

Если значение не установлено, область поиска/добавления не ограничивается.

==== Операция редактирования

Выбор операции редактирования значения элемента управления. Если операция недоступна пользователю, то изменение значения элемента управления также недоступно. Если операция не выбрана, то возможность редактирования значения элемента управления не проверяется.

Если значение `*Операции редактирования*` наследуется от родительского Блока, название свойства меняется на `*Операция редактирования (наследовано)*`.

=== Поведение

==== Видимость

Настройка видимости. Элемент управления отображается в карточке, когда флаг установлен. Элемент управления и любое его содержимое не отображаются, когда флаг снят.

`*Адаптивный*`

==== Дополнительные css классы

Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.

==== Задержка поиска (мс)

Определяет время задержки (в мс) от ввода последнего символа в строку поиска до выполнения быстрого поиска по справочнику.

==== Обязательное

Определяет требование к заполнению значения ЭУ до сохранения карточки:

* Когда флаг установлен, значение ЭУ должно быть присвоено, иначе карточка не будет сохранена. При этом ЭУ помечается предупреждающим сообщением.
* Когда флаг не установлен, присваивать значение необязательно.

==== Отключен

Когда флаг установлен, отключается возможность изменить значения элемента управления. Работает совместно со свойством `*Операция редактирования*. Рредактирование будет запрещено, если одно из свойств запрещает редактирование.

`*Адаптивный*`

==== Переходить по TAB

Флаг определяет последовательность перехода по ЭУ карточки при нажатии кнопки kbd:[TAB]. Если флаг установлен, переход по kbd:[TAB] разрешён.

include::partial$properties.adoc[tags=editDirectory]

==== Режим редактирования

Определяет вариант отображения элемента управления и возможность изменения его значения:

* *_По месту_*. Значение изменяется в отдельном окне, которое открывается нажатием на элемент управления.
+
Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
* *_Редактирование_*. Значение изменяется непосредственно в элементе управления.
+
Данный вариант может быть выбран в разметке режима редактирования и просмотра.
+
Если элемент с режимом *_Редактирование_* добавлен в разметку просмотра, необходимо самостоятельно обеспечить сохранение его значения. Например, с использованием скриптов карточек.
* *_Без редактирования_*. Значение изменить нельзя.

==== Стандартный css класс

Название CSS класса, в котором определен стандартный стиль элемента управления.

=== События

==== Перед загрузкой результатов поиска

Вызывается перед отправкой запроса на получение данных Справочника контрагентов с сервера.

==== Перед закрытием окна редактирования

Вызывается перед закрытием окна редактирования в режиме редактирования *_По месту_*.

==== Перед закрытием окна справочника

Вызывается перед закрытием окна выбора значения из справочника.

==== Перед открытием окна редактирования

Вызывается перед открытием окна редактирования в режиме редактирования *_По месту_*.

==== Перед открытием окна справочника

Вызывается перед открытием окна выбора значения из справочника.

==== После загрузки результатов поиска

Вызывается после получения данных Справочника контрагентов с сервера.

==== После закрытия окна редактирования

Вызывается после закрытия окна редактирования в режиме редактирования *_По месту_*.

==== После закрытия окна справочника

Вызывается после закрытия окна выбора значения из справочника.

==== После изменения текущего фильтра

Вызывается после изменения пользователем фильтра данных Справочника контрагентов.

==== После открытия окна редактирования

Вызывается после открытия окна редактирования в режиме редактирования *_По месту_*.

==== После открытия окна справочника

Вызывается после открытия окна выбора значения из справочника.

==== При изменении текущего фильтра

Вызывается при изменении пользователем фильтра данных Справочника контрагентов.

==== При наведении курсора

Вызывается при входе курсора мыши в область элемента управления.

==== При отведении курсора

Вызывается, когда курсор мыши покидает область элемента управления.

==== После смены данных

Вызывается после изменения содержимого элемента управления.

==== При щелчке

Вызывается при щелчке мыши по любой области элемента управления.
