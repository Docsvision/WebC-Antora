
== Партнер

Элемент управления [.ph .uicontrol]*Партнер* предназначен для выбора сотрудника из [.dfn .term]_Справочника контрагентов_ и изменения данных справочника.

image::ct_partner_selector_sample.png[[.fig--title-label]##Рис. 1. ##Справочник контрагентов]

Вариант отображения [.dfn .term]_ЭУ_ зависит от настройки `Режим     редактирования`:

* Редактирование - [.dfn .term]_ЭУ_ в данном режиме может быть использован только в разметке режима редактирования карточки. [.dfn .term]_ЭУ_ в данном режиме поддерживает быстрый поиск и выбор из [.dfn .term]_Справочника контрагентов_.
+
image::ct_partner_editmode.png[[.fig--title-label]##Рис. 2. ##Элемент управления «Партнер» в режиме редактирования]
+
Быстрый поиск осуществляется по названию организации/подразделения контрагента и ФИО сотрудника контрагента, а в режиме выбора из справочника - также возможен поиск организации по ИНН.
* По месту - [.dfn .term]_ЭУ_ в данном режиме может быть использован в разметке режима чтения и редактирования карточки. Выбор и изменение выбранного сотрудника контрагента осуществляется при нажатии на ссылку в [.dfn .term]_ЭУ_. Поиск и выбор осуществляется аналогично поиску и выбору для режима Редактирование.
+
image::ct_partner_placemode.png[[.fig--title-label]##Рис. 3. ##Элемент управления «Партнер» в режиме редактирования по месту]
* Без редактирования - [.dfn .term]_ЭУ_ в данном режиме отображает по умолчанию ФИО сотрудника контрагента из связанного поля карточки.

Особенность удаления записей из Справочника контрагентов: если пользователь после добавления записи в Справочник контрагентов откажется от сохранения изменений, запись будет удалена от имени данного пользователя -- если у пользователя есть права на удаление; от имени учётной записи пула приложений {wc}а -- если у пользователя нет прав на удаление записей из Справочника контрагентов. Если нужно запретить удаление записей пулом приложений, запретите данную операцию для учётной записи пула приложений {wc}а в дискреционных правах Справочника контрагентов.

=== Свойства

Общие::
Название ЭУ:::
Название типа элемента управления.
Название:::
Уникальное название элемента управления.
Внешний вид::
Заполнитель:::
Текст, отображаемый в элементе управления, если сотрудник не выбран.
+
[.dfn .term]_Локализуемый_.
Операция редактирования для видимости:::
Определяет операцию, которая должна быть доступна пользователю для показа данного элемента управления. Действие настройки зависит от значения настройки [.dfn .term]_Видимость_:
+
* флаг `*Видимость*` установлен, [.dfn .term]_операция редактирования для видимости_ выбрана -- видимость элемента определяется доступностью пользователю выбранной операции редактирования;
* флаг `*Видимость*` установлен, [.dfn .term]_операция редактирования для видимости_ НЕ выбрана -- ЭУ всегда отображается;
* флаг `*Видимость*` НЕ установлен -- ЭУ всегда скрыт.
Отображать метку без значения:::
Определяет вариант отображения метки: флаг установлен -- текст метки отображается всегда; флаг не установлен -- текст метки отображается только, когда задано значение [.dfn .term]_ЭУ_.
Подсказка:::
Содержимое всплывающей подсказки.
+
[#concept_afw_rwx_wbb__d7e65 .dfn .term]#Локализуемый#.
Подсказка к значению:::
Содержимое всплывающей подсказки, отображаемой если сотрудник выбран. Возможные варианты:
+
* ФИО
* ФИО+Должность
* Не используется -- во всплывающей подсказке отображается текст из поля [.kbd .ph .userinput]`Подсказка`
+
[.dfn .term]_Локализуемый_.
Текст метки:::
Содержимое метки, отображаемой слева от элемента управления.
+
[.dfn .term]_Локализуемый_.
Формат отображения:::
Определяет формат отображения данных сотрудника в [.dfn .term]_ЭУ_:
+
* Фамилия И.О.
* Строка отображения - используется формат отображения, настроенный в [.dfn .term]_Справочнике контрагентов_
Данные::
Расширенный источник данных:::
Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
Источник данных:::
Секция карточки, содержащая данные элемента управления.
Поле данных:::
Поле карточки, содержащее ссылку на сотрудника из [.dfn .term]_Справочника контрагентов_.
Выбирать из:::
Ограничивает возможность поиска/добавления сотрудников: пользователь сможет искать и добавлять сотрудников только в выбранную организацию или в подчиненные организации и подразделения. Если значение не установлено, область поиска/добавления не ограничивается.
Операция редактирования:::
Выбор операции редактирования значения элемента управления. Если операция недоступна пользователю, то изменение значения элемента управления также недоступно. Если операция не выбрана, то возможность редактирования значения элемента управления не проверяется.
+
Если значение [.dfn .term]_Операции редактирования_ наследуется от родительского Блока, название настройки меняется на «Операция редактирования (наследовано)».
Поведение::
Видимость:::
Настройка видимости: флаг установлен -- элемент управления отображается в карточке; флаг не установлен -- элемент управления (а также его содержимое) не отображается в карточке.
+
[.dfn .term]_Адаптивный_.
Дополнительные css классы:::
Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
Задержка поиска (мс):::
Определяет время задержки (в мс) от ввода последнего символа в строку поиска до выполнения быстрого поиска по справочнику.
Обязательное:::
Определяет требование к заполнению значения [.dfn .term]_ЭУ_ до сохранения карточки: флаг установлен -- значение должно быть присвоено, иначе карточка не будет сохранена ([.dfn .term]_ЭУ_ помечается предупреждающим сообщением); флаг не установлен -- присваивать значение не обязательно.
Отключен:::
При установленном флаге отключает возможность изменения значения элемента управления. Работает совместно со свойством «Операция редактирования»: если одно из свойств запрещает редактирования -- редактирование будет запрещено.
+
[.dfn .term]_Адаптивный_.
Переходить по TAB:::
Определяет пользовательскую последовательность очередности обхода карточки по кнопке [.ph .uicontrol]*TAB*. Флаг установлен -- переход по кнопке [.ph .uicontrol]*TAB* разрешен.
Редактирование справочника:::
Активирует функцию редактирования данных Справочника контрагентов с помощью данного элемента управления: флаг установлен -- редактирование разрешено при наличии прав у пользователя, флаг снят -- функции редактирования справочника не предоставляются.
Режим редактирования:::
Определяет вариант отображения элемента управления и возможность изменения его значения:
+
* "По месту" -- значение изменяется в отдельном окне, которое открывается при щелчке мыши по элементу управления. Данный вариант подходит как для разметки режима редактирования, так и для разметки режима просмотра карточки.
* "Редактирование" -- значение изменяется непосредственно в элементе управления. Данный вариант может быть выбран в разметке режима редактирования и просмотра.
+
Если элемент с режимом "Редактирование" добавлен в разметку просмотра, необходимо самостоятельно обеспечить возможность сохранения его значения с использованием скриптов карточек.
* "Без редактирования" -- значение изменить нельзя.
Стандартный css класс:::
Название CSS класса, в котором определен стандартный стиль элемента управления.
События::
События:::
Перед загрузкой результатов поиска::
      Вызывается перед отправкой запроса на получение данных Справочника контрагентов с сервера.
Перед закрытием окна редактирования::
      Вызывается перед закрытием окна редактирования в режиме редактирования "По месту".
Перед закрытием окна справочника::
      Вызывается перед закрытием окна выбора значения из справочника.
Перед открытием окна редактирования::
      Вызывается перед открытием окна редактирования в режиме редактирования "По месту".
Перед открытием окна справочника::
      Вызывается перед открытием окна выбора значения из справочника.
После загрузки результатов поиска::
      Вызывается после получения данных Справочника контрагентов с сервера.
После закрытия окна редактирования::
      Вызывается после закрытия окна редактирования в режиме редактирования "По месту".
После закрытия окна справочника::
      Вызывается после закрытия окна выбора значения из справочника.
После изменения текущего фильтра::
      Вызывается после изменения пользователем фильтра данных Справочника контрагентов.
После открытия окна редактирования::
      Вызывается после открытия окна редактирования в режиме редактирования "По месту".
После открытия окна справочника::
      Вызывается после открытия окна выбора значения из справочника.
При изменении текущего фильтра::
      Вызывается при изменении пользователем фильтра данных Справочника контрагентов.
При наведении курсора::
      Вызывается при входе курсора мыши в область элемента управления.
При отведении курсора::
      Вызывается, когда курсор мыши покидает область элемента управления.
После смены данных::
      Вызывается после изменения содержимого элемента управления.
При щелчке::
      Вызывается при щелчке мыши по любой области элемента управления.
