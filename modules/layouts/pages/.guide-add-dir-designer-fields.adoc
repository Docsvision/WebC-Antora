= Добавление полей в форму строки справочника

По умолчанию в форму добавления строки справочника выводятся только поля по умолчанию. При необходимости в форму можно выводить дополнительные поля.

Такое поведение поддерживается в {wincl}е. Если строка создаётся в конструкторе справочников в нужном справочнике, поля отображаются. В {wc}е необходимо выполнить дополнительные настройки, чтобы поля также выводились для заполнения.

. В _Справочнике видов карточек_ для типа карточки _Карточка строки справочника_ добавьте новый вид, например, _Контрагенты_.
+
.Добавление нового вида карточек
image::new-kind.png[Добавление нового вида карточек]
+
. В настройках _Конструктора справочников_ укажите созданный вид.
+
.Настройки в конструкторе справочников
image::directory-designer.png[Настройки в конструкторе справочников]
+
. В программе {kvr} добавьте и настройте разметки создания, просмотра и редактирования для строки с контрагентами. Для упрощения задачи можно скопировать базовые разметки и внести изменения в их копии.
+
.Настройка разметок для строки с контрагентами
image::layouts-directory-designer-row.png[Настройка разметок для строки с контрагентами]
+
. На вкладке _Условия выбора_ добавьте условия для созданных разметок. При этом укажите вид карточки, добавленный на первом шаге.
+
.Настройка условий выбора
image::selection-modes.png[Настройка условий выбора]
+
. Настройте разметку в соответствии с предпочтениями.
+
.Настройка разметки карточки
image::layout-settings-partner-dir-row.png[Настройка разметки карточки]
+
. В Конструкторе разметок {wincl}а добавьте секцию метаданных. Для редактирования потребуется заблокировать разметку и метаданные карточки.
+
.Редактирование метаданных карточки
image::layout-metadata.png[Редактирование метаданных карточки]
+
. Откройте {kvr} и добавьте расширенный источник данных для элемента `root` разметки:
+
.Редактирование расширенного источника данных
image::extended-data-source-partners.png[Редактирование расширенного источника данных]
+
Выполните действие для разметок _Просмотра_, _Редактирования_ и _Создания_ карточки.
+
. Укажите поле данных из расширенного источника для полей карточки:
+
.Выбор расширенного источника данных для поля
image::extended-data-source-fields.png[Выбор расширенного источника данных для поля]
+
Выполните действие для каждого поля в разметках _Просмотра_, _Редактирования_ и _Создания_ карточки.
+
. Поднимите порядок добавленных условий в списке, чтобы они имели приоритет над стандартными.
+
.Повышение приоритета условий выбора
image::order-partners.png[Повышение приоритета условий выбора]
+
. Убедитесь, что в {wc}е разметка отображается корректно.
+
Для быстрого отображения изменений на период настройки можно изменить значение параметра `SharedDictionaryRefreshMode` в конфигурационном файле модуля, см. подробнее в разделе "xref:admin:directory-read-only.adoc[]".
