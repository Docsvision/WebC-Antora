= Задания

Элемент управления _Задания_ предназначен для создания и отображения связанных заданий и групп заданий карточки.

.Пример элемента управления "Задания" со списком связанных заданий карточки
image::controls_task.png[Пример элемента управления "Задания" со списком связанных заданий карточки]

В списке заданий отображаются только задания и группы заданий непосредственно связанные с карточкой; задания большей глубины вложенности не отображаются.

TIP: Данный ЭУ может быть добавлен только в разметку, предназначенную для просмотра карточек.

include::partial$restartRequired2.adoc[]

== Свойства

Общие::
Название ЭУ:::
Название типа элемента управления.
Название:::
Уникальное название элемента управления.
Внешний вид::
Дайджест представления:::
Определяет формат отображения списка заданий карточки.
* Когда флаг установлен, отображаются названия заданий и значки состояний.
* Когда флаг не установлен, отображается название задания, ФИО исполнителя, срок окончания и состояние задания или группы заданий
+
.Список заданий в режиме "Дайджест"
image::controls_task_sample_digest.png[Список заданий в режиме "Дайджест"]
Заголовок:::
Текст, который будет отображаться над блоком элемента управления. Заголовок выделяется жирным шрифтом.
+
`*Локализуемый*`
Данные::
Расширенный источник данных:::
Выбор типа источника данных элемента управления: текущая карточка или один из типов, настроенных в корневом элементе разметки.
Источник данных:::
Секция карточки, содержащая данные элемента управления.
Поле данных:::
Поле карточки, содержащее ссылку на карточку _Список ссылок на карточки заданий_.
Виды заданий для отображения:::
Выбор видов отображаемых в списке заданий. Если значение не указано, то в списке отображаются связанные задания всех видов.
Виды заданий для создания:::
Выбор видов заданий, которые могут быть созданы из карточки.
+
Для каждого вида может быть указано собственное отображаемое название.
+
.Форма для выбора видов карточек
image::controls_task_kinds.png[Форма для выбора видов карточек]
+
Флаг `*К согласованию*` включает возможность создания в согласовании подчиненного задания согласования. Чтобы функция работала, в настройках этапа согласования должна быть включена настройка _Разрешить создание подчиненных заданий_.
+
При установленном флаге, в список видов карточек добавляется вид _Подчиненные к согласованию_.
+
.Форма для выбора видов карточек с установленным флагом К согласованию
image::controls_task_childaprov.png[Форма для выбора видов карточек с установленным флагом К согласованию]
+
Флаг `*Использовать настройки Задания*` включает режим, при котором список доступных для создания видов карточек будет получен из _Справочника видов карточек_. Данный режим предназначен для настройки разметок карточки _Задание_.
+
Если флаг установлен, виды подчиненных заданий и групп заданий будут получены из свойств `*Виды подчиненного задания*` и `*Виды подчиненной группы заданий*`.
+
.При этом действуют следующие правила:
* Создание подчиненных заданий недоступно, если в _Справочнике видов карточек_ используется режим *_Выбор из ограниченного списка_*, но виды в списке не выбраны.
* Если в настройках вида задания разрешается создавать подчиненные задания единственного вида, то при создании будет выбран этот вид. Диалоговое окно выбора вида не будет показано.
* При создании подчиненных заданий учитываются настройки переноса значений полей и ссылок из родительского задания.
+
NOTE: Когда флаг `*Использовать настройки Задания*` установлен, возможность добавления видов карточек блокируется.
+
Операция редактирования:::
Выбор операции редактирования для добавления связанных заданий. Если значение не задано, добавление будет доступно всем (в случае, если добавление разрешено).
+
Если значение `*Операции редактирования*` наследуется от родительского Блока, название настройки меняется на `*Операция редактирования (наследовано)*`.
Операция редактирования для видимости:::
Определяет операцию, которая должна быть доступна, чтобы ЭУ отображался для пользователя. Действие настройки зависит от значения свойства _Видимость_:
+
* Когда флаг `*Видимость*` установлен и выбрана _операция редактирования для видимости_, видимость элемента определяется исходя из доступности пользователю выбранной операции редактирования.
* Когда флаг `*Видимость*` установлен, и _операция редактирования для видимости_ НЕ выбрана, ЭУ отображается всегда.
* Когда флаг `*Видимость*` НЕ установлен, ЭУ всегда скрыт.
Создание групп заданий:::
Определяет возможность создания новой группы заданий из элемента управления. Создание групп заданий разрешено, если флаг установлен.
Создание заданий:::
Определяет возможность создавать новое задание из элемента управления. Создание заданий разрешено, если флаг установлен.
Поведение::
Видимость:::
Настройка видимости. Элемент управления отображается в карточке, когда флаг установлен и не отображается вместе с содержимым, когда флаг снят.
+
`*Адаптивный*`
Дополнительные css классы:::
Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
Отключен:::
Когда флаг установлен, отключается возможность изменить значения элемента управления. Работает совместно со свойством `*Операция редактирования*`:редактирование будет запрещено, если одно из свойств запрещает редактирование.
+
`*Адаптивный*`
Загружать синхронно (шт):::
Определяет максимальное количество элементов списка, при котором должна использоваться синхронная загрузка данных. Если количество элементов больше указанного, то все данные будут загружаться асинхронно.
Переходить по TAB:::
Флаг определяет последовательность перехода по ЭУ карточки при нажатии кнопки kbd:[TAB]. Если флаг установлен, переход по kbd:[TAB] разрешён.
Режим открытия:::
Определяет способ открытия ссылки:
+
* "Текущая вкладка" -- ссылка будет открыта в текущей вкладке;
* "Новая вкладка" -- ссылка будет открыта в новой вкладке;
* "Новое окно браузера" -- ссылка будет открыта в новом окне веб-браузера.
Режим отображения:::
Определяет вариант отображения элемента управления в карточке:
+
* "Список и создание" - в ЭУ отображаются задания (в формате, определенном настройкой "Дайджест представления") и кнопка создания нового задания или группы заданий;
* "Только создание" - в ЭУ отображается кнопка создания нового задания или группы заданий;
* "Родитель" - в элементе управления отображается ссылка на родительское задание. Для работы ЭУ в данном режиме в настройке `Поле                         данных` должно быть указано поле карточки, содержащее ссылку на родительское задание.
Стандартный css класс:::
Название CSS класса, в котором определен стандартный стиль элемента управления.
События::
Перед разворачиванием:::
Вызывается перед разворачиванием списка заданий кнопкой image:buttons/bt_expand.png[Развернуть].
Перед сворачиванием:::
Вызывается перед сворачиванием списка заданий кнопкой image:buttons/bt_collapse.png[Свернуть].
Перед созданием задания:::
Вызывается перед созданием задания.
После загрузки заданий:::
Вызывается после загрузки заданий.
При наведении курсора:::
Вызывается при входе курсора мыши в область элемента управления.
При отведении курсора:::
Вызывается, когда курсор мыши покидает область элемента управления.
При разворачивании:::
Вызывается после разворачивания списка заданий кнопкой image:buttons/bt_expand.png[Развернуть].
При сворачивании:::
Вызывается после сворачивания списка заданий кнопкой image:buttons/bt_collapse.png[Свернуть].
При щелчке:::
Вызывается при щелчке мыши по любой области элемента управления.
