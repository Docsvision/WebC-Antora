= Подключение дополнительных источников данных

При настройке разметки по умолчанию предоставляется доступ только к данным текущей карточки. Это значит, что элементы управления, позволяющие отображать и/или изменять данные карточки, могут работать только с секциями и полями данной карточки.

Если требуется, к разметке можно подключить дополнительные источники данных (карточки, связанные с текущей), с которыми смогут работать элементы разметки.

.Чтобы подключить дополнительные источники данных:
. Откройте разметку карточки или справочника.
. Выберите xref:Control_layout.adoc[корневой элемент управления разметки].
. Нажмите кнопку image:buttons/bt_dots.png[Три точки] в свойстве _Расширенные источники данных_. Будет открыто окно _Расширенные источники данных_.
+
.Настройка дополнительных источников данных
image::extDataSouceConfigEmpty.png[Настройка дополнительных источников данных]
. Нажмите кнопку *Добавить*. В список источников будет добавлен новый источник.
+
.Дополнительные источники с добавленным источником
image::extDataSouceConfigWithAddedSource.png[Дополнительные источники с добавленным источником]
. В списке *_Тип источника данных*_ выберите тип связанной карточки, которая будет выступать источником дополнительных данных.
+
.Типы источников данных для карточки:
include::admin:partial$table.adoc[]

2+|*Для всех локаций:*

|_Ссылка из поля карточки_
|Источником данных выступает любая карточка, на которую ведёт ссылка из поля текущей карточки. В параметрах получения источника (см. ниже) нужно выбрать поле текущей карточки, содержащее ссылку на карточку, которая будет являться дополнительным источником данных. Данный тип источника может использоваться в любых карточках и справочниках.

2+|*Для локаций карточек:*

|_Согласуемый документ_
|Источником данных выступает Документ, по которому выполняется согласование. Данный тип источника должен использоваться только в разметках карточек Заданий согласования.

|_Документ для Задания_
|Источником данных выступает Документ, связанный с заданием (выбирается из списка ссылок). В параметрах получения источника (см. ниже) можно выбрать тип ссылки, указывающей на Документ. Если в списке ссылок несколько карточек Документ с выбранным типом ссылок, дополнительным источником будет выбрана первая найденная карточка. Данный тип источника может использоваться в разметках карточек _Задание_ и _Группа Заданий_.

|_Связанная карточка ГЗ_
|Источником выступает _Группа заданий_ из списка ссылок карточки Задание. В параметрах получения источника (см. ниже) нужно выбрать тип ссылки, указывающей на Группу заданий. Если в списке ссылок несколько карточек Группа заданий с выбранным типом ссылок, дополнительным источником будет являться первая найденная карточка. Данный тип источника предназначен для разметок карточек Задание.

Для получения данных из родительской группы заданий нужно выбрать тип ссылки _Связанные карточки_.
====
2+|*Для локации Диалог профиля пользователя:*
|_Карточка текущего пользователя_
|Получает данные из карточки сотрудника.

|_Строка справочника текущего пользователя_
|Получает данные из Справочника сотрудников из строки пользователя.
|===
+
. Нажмите кнопку *Установить параметры*, чтобы настроить параметры получения дополнительного источника данных. Данная настройка не требуется для типа _Согласуемый документ_.
* Для типа _Документ для Задания_ выберите тип ссылки на Документ, который будет являться источником данных.
* Для типа _Ссылка из поля карточки_ выберите поле текущей карточки, содержащее ссылку на карточку, которая будет являться источником данных.
. Нажмите кнопку *ОК*, чтобы сохранить настройки. В колонке _Наименование_ будет записано название нового типа источника данных (не редактируемое).
. Если требуется, включите асинхронную загрузку данных из связанной карточки.
+
По умолчанию данные связанной карточки получаются синхронно при открытии текущей карточки. Для включения асинхронного режима снимите флаг `*Загружать синхронно`*. Элементы управления, получающие данные из асинхронного источника, загружаются асинхронно.
. Нажмите кнопку *ОК* в окне _Расширенные источники данных_ для настроек.
+
****
При настройке элемента управления разметки, поддерживающего получение данных из дополнительных источников (есть свойство _Расширенный источник данных_), добавленный источник выбирается по имени, которое отображается в поле _Наименование_ в окне _Расширенные источники данных_.
****
