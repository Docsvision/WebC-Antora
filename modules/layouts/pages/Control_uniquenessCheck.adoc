
== Проверка на уникальность

Элемент управления [.ph .uicontrol]*Проверка на уникальность* добавляет в карточку Документ функцию проверки уникальности атрибутов, критерии которой настроены в Справочнике видов карточек.

Проверка выполняется при изменении значения поля, сохранении карточки, а также при выполнении операций с ней. Неуникальные атрибуты карточки будут выделены цветом.

image::ct_uniquenessCheckLed.png[[.fig--title-label]##Figure 1. ##Выделение неуникальных атрибутов в карточке]

Также элемент управления добавляет в карточки значок image:ct_uniquenessCheckIco.png[image], указывающий на неуникальность карточки. При щелчке по значку будет открыто окно со списком нарушений (изображение выше), содержащем ссылку на карточку, с которой возник конфликт, а также список полей, нарушающих уникальность. В список полей также включаются неотображаемые в разметке поля, если уникальность нарушена в них.

image::ct_uniquenessCheckResult.png[[.fig--title-label]##Figure 2. ##Результат проверки уникальности]

Элемент управления может блокировать сохранение и/или изменение состояния карточки – настраивается параметрами [.dfn .term]_Блокировать при смене состояния_ и [.dfn .term]_Блокировать при сохранении_. В данном случае при сохранении или выполнении операции будет также показано окно со списком нарушений.

Элемент управления «Проверка на уникальность» предназначен для использования только в разметке карточки Документ.

[NOTE]
====
[.note__title]#Important:# Из-за особенности способа хранения данных проверка уникальности может не работать для значения элемента управления xref:Control_textarea.adoc[Текст] в режиме HTML редактора.
====

=== Свойства

Общие::
  Название ЭУ;;
    Название типа элемента управления.
  Название;;
    Уникальное название элемента управления.
Данные::
  Блокировать при смене состояния;;
    Устанавливает список состояний, переход в которые должен блокироваться, если карточка не является уникальной.
    +
    Настройка списка осуществляется в диалоговом окне – щелкните [.ph .uicontrol]*…* для открытия.
    +
    image::ct_uniquenessCheck_config.png[[.fig--title-label]##Figure 3. ##Диалоговое окно выбора состояний для блокировки]
    +
    По умолчанию переходы в другие состояния не блокируются.
    +
    Настройка влияет только на изменение состояния карточки пользователем.
  Блокировать при сохранении;;
    Включает/выключает блокировку сохранения карточки, если карточка не является уникальной. По умолчанию блокировка включена.
Поведение::
  Css класс нарушения проверки уникальности;;
    Название CSS класса со стилем, применяемым к атрибутам карточки, нарушающим уникальность. По умолчанию используется стиль «uniqueness-check-failed», который может быть изменён на пользовательский.
  Дополнительные css классы;;
    Названия дополнительных классов CSS для изменения стиля элемента управления. Перечисляются через пробел.
  Стандартный css класс;;
    Название CSS класса, в котором определен стандартный стиль элемента управления.
События::
  При наведении курсора;;
    Вызывается при входе курсора мыши в область элемента управления.
  При отведении курсора;;
    Вызывается, когда курсор мыши покидает область элемента управления.
  При щелчке;;
    Вызывается при щелчке мыши по любой области элемента управления.

