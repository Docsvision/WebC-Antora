= Порядок обновления на новую версию {wc}а

.Порядок обновления:
. С помощью _Мастера добавления ролей и компонентов_ установите компонент _Инициализация приложений_ (_Application Initialization_):
+
.Компоненты IIS в Мастере добавления ролей и компонентов
image::app-init.png[Компоненты IIS в Мастере добавления ролей и компонентов]
+
[#backup]
. Создайте резервную копию каталога установки {wc}а. Модуль производит автоматическое резервное копирование критически важных файлов серверного расширения и {wc}а, если установлен следующий флаг при обновлении.
+
.Флаг автоматического резервного копирования
image::install-server-location.png[Флаг автоматического резервного копирования]
+
Если критически важные файлы (определяются модулем) были изменены с момента последней установки или отсутствовали в дистрибутиве, они будут помещены в каталог:
+
* `C:\ProgramData\Docsvision\Backups\WebClient\дата-время.zip`.
* `C:\ProgramData\Docsvision\Backups\WebClientServerExtension\дата-время.zip`.
+
. Остановите пул приложений _{dv}SitePool_ на компьютере с сервером {wc}а.
. xref:webclient:admin:install-server.adoc[Установите] новую версию серверного расширения {wc} стандартным образом без удаления предыдущей версии.
. xref:webclient:admin:update-webc.adoc[Установите] новую версию модуля {wc} стандартным образом без удаления предыдущей версии.
+
После завершения установки будет запущен мастер настройки.
+
.Мастер настройки с режимом обновления
image::config-master-update.png[Мастер настройки с режимом обновления]
+
. Нажмите кнопку *Обновление*.
+
В процессе обновления стандартные решения {wc}а в базе данных по умолчанию будут перезаписаны.
+
. Дождитесь завершения процесса и закройте мастер настройки.
. Если файл `web.config` предыдущей версии был модифицирован при настройке {wc}а, и данные изменения требуется перенести в новую версию, выполните перенос вручную из резервной копии файла, созданной на шаге 1.
. При обновлении также происходит проверка параметра *_LoadLayouts_* в файле конфигурации по адресу `%LocalAppData%\Docsvision\WebClientAdminConsole.config`. В зависимости от значения *_true_* или *_false_* разметки будут автоматически загружены в базу данных или администратору нужно будет импортировать их вручную позднее.
. Запустите остановленный пул приложений _{dv}SitePool_.
. Проверьте работоспособность модуля.
. При использовании кластера {wc} установите новую версию модуля на всех узлах.
+
NOTE: Перед обновлением измените тип подключения {wc}а к серверу {dv}, если адрес был изменён.
+
. После обновления {wc} на клиентских компьютерах должна быть обновлена программа _DVWebTool_.

Обновление будет выполнено автоматически при запуске программы _DVWebTool_, если она установлена.