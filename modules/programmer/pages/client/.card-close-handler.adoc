= Обработка события закрытия карточки

Чтобы обработать событие закрытия карточки, нужно обратиться к событиям менеджера разметок -- `layoutManager`. Данный объект предоставляет два события: до и после закрытия разметки.

Ниже приведён пример метода, в котором закрытие разметки приостанавливается до подтверждения пользователем завершения задания.

[source,typescript]
----
export function onOpen(sender: Layout, e: BasicEvent<IEventArgs>) { <.>

    layoutManager.layoutUnloading.subscribe((sender, e) => { <.>
       e.wait();
        MessageBox.ShowConfirmation("Вы хотите завершить задание?") <.>
         .then(
            () => {
                <.>
                console.log("Пользователь подтвердил действие");
                e.accept();
            })
         .catch(() => {
            console.log("Пользователь отклонил действие");
            e.accept();
         });
   });
}
----
<.> Подписка на событие ДО закрытия разметки.
<.> Обязательная приостановка события закрытия разметки.
<.> Диалог подтверждения.
<.> Здесь должен быть код завершения задания.
