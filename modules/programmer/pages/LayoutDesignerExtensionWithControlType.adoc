= Добавление нового элемента управления

Добавить новый тип элементов управления в Конструктор web-разметок можно с помощью расширения.

Расширение предоставляет возможность настраивать разметку с использованием нового элемента управления, но не обеспечивает его функционирование на клиентской стороне.

Полностью вопрос разработки новых типов элементов управления будет рассмотрен в разделе link:NewControls.md[Разработка элементов управления].

Чтобы создать расширение, добавляющее новый тип элементов управления, выполните приведенную далее инструкцию.

. link:LayoutDesignerExtensionNew.md[Создайте проект расширения Конструктора web-разметок].

. Добавьте в ядро расширения (файл `TemplateDesignerExtension.cs`) функцию, предоставляющую _описатель элемента управления_.

`csharp
   ControlTypeDescription GetSuperControlTypeDescription () 
   {
     var controlTypeDescription = new ControlTypeDescription (&quot;SuperControl&quot;) {
         DisplayName = &quot;Супер элемент управления&quot;,
         ControlGroupDisplayName = &quot;Примеры&quot;,
         PropertyDescriptions = {
             PropertyFactory.GetNameProperty(), // Название
             PropertyFactory.GetVisibilityProperty(), // Видимость
             PropertyFactory.GetClickEvent() // Событие «При щелчке»
         }
     };
     return controlTypeDescription;
   }
`

Описатель элемента управления – это объект, содержащий информацию об элементе управления: название типа, группа, перечень свойства (настроек). Описатель имеет тип `ControlTypeDescription`.

При составлении описания элемента необходимо:

. Указать название типа элемента управления. Название передается непосредственно в конструктор класса `ControlTypeDescription`.

`csharp
     // Описатель элемента управления с типом &quot;SuperControl&quot;
     var controlTypeDescription = new ControlTypeDescription (&quot;SuperControl&quot;){
`

. Указать отображаемое название типа элемента управления в DisplayName. Данное название приводится в строке «Название ЭУ» в блоке настроек элемента управления в Конструктора web-разметок.

`csharp
     DisplayName = &quot;Супер элемент управления&quot;,
`

. Указать группу элемента управления в ControlGroupDisplayName. Группа используется для группировки элементов управления в библиотеке элементов управления Конструктора web-разметок.

`csharp
  ControlGroupDisplayName = &quot;Примеры&quot;,
`

. Укажите свойства элемента управления в PropertyDescriptions.

Свойства элемента управления – его параметры, которые определяют внешний вид, связь с данными карточки, функции, вызываемые при работе элемента управления (обработчики событий). К свойствам относятся: видимость, текстовая метка, подсказка, (событие) при получении фокуса и др. Значения свойств (есть исключения) передаются в клиент, где могут быть использованы для формирования пользовательского интерфейса.

. Переопределите метод GetControlTypeDescriptions() базового класса, чтобы он возвращал коллекцию с реализованным в 2 методом:

`csharp
   protected override List&lt;ControlTypeDescription&gt; GetControlTypeDescriptions()
   {
      return new List&lt;ControlTypeDescription&gt;
      {
          GetSuperControlTypeDescription()
      };
    }
`

. Скомпилируйте проект и скопируйте полученную сборку на сервер Web-клиента в папку `&lt;Каталог установки Web-клиента&gt;\Plugins\\&lt;Каталог Решения&gt;`. Ресурсные сборки скопируйте в папки `&lt;Каталог установки Web-клиента&gt;\ru\` (для русской локализации), `&lt;Каталог установки Web-клиента&gt;\uk\` (для английской локализации) и т.д.
. Перезапустите Конструктор web-разметок.

Для проверки примера, откройте для настройки любую разметку. В библиотеке элементов управления будет доступен для использования *Супер элемент управления*.

image:img/controlsLibrary.png[Элемент управления из расширения в редакторе разметок]

В данном пункте рассмотрен один из двух возможных вариантов регистрации нового типа элементов управления. Также _описатель_ элемента управления может быть реализован в виде текстового XML файла, в котором аналогичным образом перечисляются свойства данного элемента управления. Возможность создания такого описателя элемента управления будет рассмотрена в разделе link:NewControls.md[Разработка элементов управления].