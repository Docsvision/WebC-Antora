= Обработка события изменения состояния карточки

При изменения состояния карточки из пользовательского интерфейса {wc}а вызывается событие "Перед изменением состояния карточки" разметки карточки (корневой элемент разметки), которое может быть обработано в клиентском скрипте. Данное событие является прерываемым -- может быть использовано для отмены изменения состояния карточки.

Ниже приведён код обработчика события изменения состояния карточки (Документ, Задание):

[source,typescript]
----
function changeState(sender: Layout, e: CancelableEventArgs<ICardStateChangingEventArgs>) {
    
    // Функция CheckPossibility проверяет выполнение неких требований
    if (CheckPossibility()){
        e.accept();// Подтверждаем выполнение операции. Не обязательно.
        return;
    }

    // Показываем сообщение о запрете операции с указанием идентификатора операции
    MessageBox.ShowWarning("Операция " + e.data.operationId  + " запрещена");
    e.cancel(); // Необходимо вызвать e.cancel для отмены операции
}
----

Для карточки Задание после изменения состояния карточки будет вызвано событие "После изменения состояния карточки" элемента управления _Кнопки операций задания_.