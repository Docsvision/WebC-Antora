= Обработка события закрытия карточки

Для того, чтобы обработать событие закрытия карточки нужно обратиться к событиям менеджера разметок -- `layoutManager`. Данный объект предоставляет два события: до и после закрытия разметки.

Ниже приведён пример метода, в котором закрытие разметки приостанавливается до подтверждения пользователем завершения задания.

[source,typescript]
----
export function onOpen(sender: Layout, e: BasicEvent<IEventArgs>) {
    
    // Подписка на событие ДО закрытия разметки
    layoutManager.layoutUnloading.subscribe((sender, e) => {
       // Обязательная приостановка события закрытия разметки 
       e.wait();
        
        // Диалог подтверждения
        MessageBox.ShowConfirmation("Вы хотите завершить задание?")
         .then(
            () => {
                // Здесь должен быть код завершения задания
                console.log("Пользователь подтвердил действие");
                e.accept();
            })
         .catch(() => {
            console.log("Пользователь отклонил действие");
            e.accept();
         });
   });
}
----